<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#FDB71B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-08-23T19:34:11.805114621"><title>LabPBR 材质标准 | MineGraph Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"s","level":0,"title":"反射纹理 _s","anchor":"#s"},{"id":"bjs1j0_26","level":1,"title":"红色通道","anchor":"#bjs1j0_26"},{"id":"bjs1j0_27","level":1,"title":"绿色通道","anchor":"#bjs1j0_27"},{"id":"bjs1j0_28","level":1,"title":"蓝色通道","anchor":"#bjs1j0_28"},{"id":"alpha","level":1,"title":"Alpha 通道","anchor":"#alpha"},{"id":"material","level":1,"title":"金属的工作原理","anchor":"#material"},{"id":"bjs1j0_31","level":1,"title":"布局原理","anchor":"#bjs1j0_31"},{"id":"n","level":0,"title":"法线纹理 _n","anchor":"#n"},{"id":"textureAO","level":1,"title":"材质环境光遮蔽（下称材质 AO）","anchor":"#textureAO"},{"id":"bjs1j0_148","level":1,"title":"高度图","anchor":"#bjs1j0_148"},{"id":"bjs1j0_149","level":1,"title":"布局原理","anchor":"#bjs1j0_149"},{"id":"bjs1j0_16","level":0,"title":"版本历史","anchor":"#bjs1j0_16"},{"id":"labpbr-v1-3","level":1,"title":"LabPBR v1.3","anchor":"#labpbr-v1-3"},{"id":"labpbr-v1-2","level":1,"title":"LabPBR v1.2","anchor":"#labpbr-v1-2"},{"id":"labpbr-v1-1","level":1,"title":"LabPBR v1.1","anchor":"#labpbr-v1-1"},{"id":"labpbr-v1-0","level":1,"title":"LabPBR v1.0","anchor":"#labpbr-v1-0"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="MGC_Docs/page_logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="LabPBR 材质标准 | MineGraph Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MineGraph Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://docs.minegraph.cn/md/labpbrmaterialstandard.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="LabPBR 材质标准 | MineGraph Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://docs.minegraph.cn/md/labpbrmaterialstandard.html#webpage",
    "url": "https://docs.minegraph.cn/md/labpbrmaterialstandard.html",
    "name": "LabPBR 材质标准 | MineGraph Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://docs.minegraph.cn/md/#website",
    "url": "https://docs.minegraph.cn/md/",
    "name": "MineGraph Docs Help"
}</script><!-- End Schema.org --></head><body data-id="labpbrMaterialStandard" data-main-title="LabPBR 材质标准" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Developer.md|创作者文档"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MineGraph Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="labpbrMaterialStandard" data-label-id="dev" data-annotation-ids="port,jedoc,shaderdoc,resourcedoc" id="labpbrMaterialStandard.md">LabPBR 材质标准</h1><aside class="prompt" data-type="note" data-title="" id="bjs1j0_18"><p id="bjs1j0_19">这篇文档翻译自 <a href="https://shaderlabs.org/wiki/LabPBR_Material_Standard" id="bjs1j0_20" data-external="true" rel="noopener noreferrer">LabPBR Material Standard</a> ，请以原文为准！</p></aside><p id="bjs1j0_12">这是一个利用资源包中仅有的两张纹理存储材质信息的标准。其信息由光影进行解码，并使用这些信息进行基于物理的渲染 (<span class="tooltip" id="bjs1j0_21" title="Physically-Based Rendering">PBR</span>) 。但是需要注意法线纹理和反射纹理本身并不与 PBR 有任何直接关联。</p><p id="bjs1j0_13">这个格式由 shaderLABS Discord 服务器于 2019 年 4 月末发起创建并维护至今，旨在统一过去混乱的光影和资源包的材质格式。 <br> 为了便捷，这个 <a href="https://github.com/flodri/RGBA-Formats-Converter/releases/tag/0.4" id="bjs1j0_23" data-external="true" rel="noopener noreferrer">转换器</a> 可以帮助纹理创作家从绝大多数旧格式转换到 LabPBR。</p><section class="chapter"><h2 id="s" data-toc="s">反射纹理 <code class="code" id="bjs1j0_32">_s</code></h2><p id="bjs1j0_25">光影只需要满足能正确处理光滑度（红）和 F0（绿）即为 LabPBR 完备，其他定义的材质信息是可选项。</p><section class="chapter"><h3 id="bjs1j0_26" data-toc="bjs1j0_26">红色通道</h3><ul class="list _bullet" id="bjs1j0_33"><li class="list__item" id="bjs1j0_35"><p>代表&ldquo;感知&rdquo;平滑度。 </p><ul class="list _bullet" id="bjs1j0_36"><li class="list__item" id="bjs1j0_37"><p>使用 <code class="code" id="bjs1j0_39">粗糙度 = pow(1.0 - 感知平滑度, 2.0)</code> 来将感知平滑度转换到线性粗糙度。</p></li><li class="list__item" id="bjs1j0_38"><p>使用 <code class="code" id="bjs1j0_40">感知平滑度 = 1.0 - sqrt(粗糙度)</code> 来将线性粗糙度转化为感知平滑度。</p></li></ul></li></ul><section class="chapter"><h4 id="bjs1j0_34" data-toc="bjs1j0_34">对于纹理创作者</h4><p id="bjs1j0_41">值 255（100%）表示材质完全光滑（例如磨制花岗岩）；值 0（0%）则是粗糙的材质（例如石头）。</p></section></section><section class="chapter"><h3 id="bjs1j0_27" data-toc="bjs1j0_27">绿色通道</h3><ul class="list _bullet" id="bjs1j0_42"><li class="list__item" id="bjs1j0_44"><p>值 0 ~ 229 表示 F0，也叫反射率。 </p><ul class="list _bullet" id="bjs1j0_46"><li class="list__item" id="bjs1j0_47"><p>这个属性以线性存储。 <span class="control" id="bjs1j0_48">请注意值 229 实际上表示 <code class="code" id="bjs1j0_49">229/255</code> ，即约 90%，而不是 100%</span>.</p></li></ul></li><li class="list__item" id="bjs1j0_45"><p>值 230 ~ 255 表示特定的硬编码金属。 </p><ul class="list _bullet" id="bjs1j0_50"><li class="list__item" id="bjs1j0_51"><p>这个区间的硬编码细节见 <a href="#material" id="bjs1j0_52" data-tooltip="为了能够以有限的信息量更准确地表示金属，一些金属已被预定义，并且通过将绿色通道设置为 230 到 254 的特定值来选择。此时，反照率（颜色纹理）将用于对反射进行着色，而不是对漫反射着色。">金属的工作原理</a>。</p></li></ul></li></ul><section class="chapter"><h4 id="bjs1j0_43" data-toc="bjs1j0_43">对于纹理创作者</h4><p id="bjs1j0_53">这个值可以视为材质的最小反射强度，因此当正视材质时小的值会产生更弱的反射，而大的值则会产生更强和更明显的反射。不同于传统高光度的是，这并不是反射强度的倍率，意味着平视材质（视线与表面接近平行时）时反射总是更强（称为&ldquo;菲涅尔效应&rdquo;，关于这个现象的更多信息见： <a href="https://www.researchgate.net/figure/Principle-of-the-Fresnel-effect-the-amount-of-reflection-on-a-reflective-surface-depends_fig3_319178578" id="bjs1j0_54" data-external="true" rel="noopener noreferrer">菲涅尔效应原理</a>）。</p></section></section><section class="chapter"><h3 id="bjs1j0_28" data-toc="bjs1j0_28">蓝色通道</h3><ul class="list _bullet" id="bjs1j0_55"><li class="list__item" id="bjs1j0_57"><p>对于非金属／绝缘体： </p><ul class="list _bullet" id="bjs1j0_59"><li class="list__item" id="bjs1j0_60"><p>值 0 ~ 64 表示孔隙率。 <a href="https://github.com/rre36/lab-pbr/wiki/Porosity-Examples" id="bjs1j0_63" data-external="true" rel="noopener noreferrer">这里</a> 有一些示例。</p></li><li class="list__item" id="bjs1j0_61"><p>值 65 ~ 255 表示次表面散射强度。</p></li><li class="list__item" id="bjs1j0_62"><p>孔隙率和次表面散射强度均以线性存储。</p></li></ul></li><li class="list__item" id="bjs1j0_58"><p>对于金属／导体： </p><ul class="list _bullet" id="bjs1j0_64"><li class="list__item" id="bjs1j0_65"><p>暂留，以备将来使用。</p></li></ul></li></ul><section class="chapter"><h4 id="bjs1j0_56" data-toc="bjs1j0_56">对于纹理创作者</h4><p id="bjs1j0_66">孔隙率表示材质可以吸收多少水分，这个值越高，被打湿（如下雨时）后表面颜色就会更暗并产生更弱的反射。这可以让同时支持孔隙率和基于天气变化的湿度（如雨天水坑）的光影产生更加准确的效果。下面是一些示例值。</p><div class="table-wrapper"><table class="wide" id="bjs1j0_67"><thead><tr class="ijRowHead" id="bjs1j0_69"><th id="bjs1j0_74"><p>材质</p></th><th id="bjs1j0_75"><p>孔隙率</p></th></tr></thead><tbody><tr id="bjs1j0_70"><td id="bjs1j0_76"><p>沙子</p></td><td id="bjs1j0_77"><p>64</p></td></tr><tr id="bjs1j0_71"><td id="bjs1j0_78"><p>羊毛</p></td><td id="bjs1j0_79"><p>38</p></td></tr><tr id="bjs1j0_72"><td id="bjs1j0_80"><p>木头</p></td><td id="bjs1j0_81"><p>12</p></td></tr><tr id="bjs1j0_73"><td id="bjs1j0_82"><p>金属和其他不透水材料</p></td><td id="bjs1j0_83"><p>0</p></td></tr></tbody></table></div><p id="bjs1j0_68">孔隙率的示例可以在 <a href="https://github.com/rre36/lab-pbr/wiki/Porosity-Examples" id="bjs1j0_84" data-external="true" rel="noopener noreferrer">这里</a> 找到。</p></section></section><section class="chapter"><h3 id="alpha" data-toc="alpha">Alpha 通道</h3><ul class="list _bullet" id="bjs1j0_85"><li class="list__item" id="bjs1j0_87"><p>可以设置为 0 ~ 254。0 表示 0% 发光强度，254 表示 100% 发光强度。</p></li><li class="list__item" id="bjs1j0_88"><p>这个值以线性存储。</p></li></ul><section class="chapter"><h4 id="bjs1j0_86" data-toc="bjs1j0_86">对于纹理创作者</h4><p id="bjs1j0_89">低的值意味着更弱的自发光，高的值会产生更强的光照，但 255（不透明）会被忽略。</p></section></section><section class="chapter"><h3 id="material" data-toc="material">金属的工作原理</h3><p id="bjs1j0_90">为了能够以有限的信息量更准确地表示金属，一些金属已被预定义，并且通过将绿色通道设置为 230 到 254 的特定值来选择。此时，反照率（颜色纹理）将用于对反射进行着色，而不是对漫反射着色。</p><p id="bjs1j0_91">如果你需要一个没有被预定义的金属，你也可以将绿色通道设置为 255 。这样反照率依旧会被用作 F0 ，这不太准确，但是也能产生相当不错的效果。</p><p id="bjs1j0_92">考虑到一些光影可能不支持预定义金属，这个区间的值都将被视为 255 。</p><div class="table-wrapper"><table class="wide" id="bjs1j0_93"><thead><tr class="ijRowHead" id="bjs1j0_94"><th id="bjs1j0_103"><p>金属</p></th><th id="bjs1j0_104"><p>颜色值</p></th><th id="bjs1j0_105"><p>N (R, G, B)</p></th><th id="bjs1j0_106"><p>K (R, G, B)</p></th></tr></thead><tbody><tr id="bjs1j0_95"><td id="bjs1j0_107"><p>铁</p></td><td id="bjs1j0_108"><p>230</p></td><td id="bjs1j0_109"><p>2.9114, 2.9497, 2.5845</p></td><td id="bjs1j0_110"><p>3.0893, 2.9318, 2.7670</p></td></tr><tr id="bjs1j0_96"><td id="bjs1j0_111"><p>金</p></td><td id="bjs1j0_112"><p>231</p></td><td id="bjs1j0_113"><p>0.18299, 0.42108, 1.3734</p></td><td id="bjs1j0_114"><p>3.4242, 2.3459, 1.7704</p></td></tr><tr id="bjs1j0_97"><td id="bjs1j0_115"><p>铝</p></td><td id="bjs1j0_116"><p>232</p></td><td id="bjs1j0_117"><p>1.3456, 0.96521, 0.61722</p></td><td id="bjs1j0_118"><p>7.4746, 6.3995, 5.3031</p></td></tr><tr id="bjs1j0_98"><td id="bjs1j0_119"><p>铬</p></td><td id="bjs1j0_120"><p>233</p></td><td id="bjs1j0_121"><p>3.1071, 3.1812, 2.3230</p></td><td id="bjs1j0_122"><p>3.3314, 3.3291, 3.1350</p></td></tr><tr id="bjs1j0_99"><td id="bjs1j0_123"><p>铜</p></td><td id="bjs1j0_124"><p>234</p></td><td id="bjs1j0_125"><p>0.27105, 0.67693, 1.3164</p></td><td id="bjs1j0_126"><p>3.6092, 2.6248, 2.2921</p></td></tr><tr id="bjs1j0_100"><td id="bjs1j0_127"><p>铅</p></td><td id="bjs1j0_128"><p>235</p></td><td id="bjs1j0_129"><p>1.9100, 1.8300, 1.4400</p></td><td id="bjs1j0_130"><p>3.5100, 3.4000, 3.1800</p></td></tr><tr id="bjs1j0_101"><td id="bjs1j0_131"><p>铂</p></td><td id="bjs1j0_132"><p>236</p></td><td id="bjs1j0_133"><p>2.3757, 2.0847, 1.8453</p></td><td id="bjs1j0_134"><p>4.2655, 3.7153, 3.1365</p></td></tr><tr id="bjs1j0_102"><td id="bjs1j0_135"><p>银</p></td><td id="bjs1j0_136"><p>237</p></td><td id="bjs1j0_137"><p>0.15943, 0.14512, 0.13547</p></td><td id="bjs1j0_138"><p>3.9291, 3.1900, 2.3808</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="bjs1j0_31" data-toc="bjs1j0_31">布局原理</h3><p id="bjs1j0_139">对于红色和绿色通道的安排相当简单：</p><ul class="list _bullet" id="bjs1j0_140"><li class="list__item" id="bjs1j0_143"><p>在大多数以前的格式中，红色代表平滑度。没有什么理由改变这一点。</p></li><li class="list__item" id="bjs1j0_144"><p>在大多数以前的格式中，绿色表示金属性。定义&ldquo;半金属&rdquo;虽然不写实，但通常可以用于在一定程度上控制 F0 。</p></li></ul><p id="bjs1j0_141">然后，我们只剩下两个通道用于自发光、孔隙率和次表面散射，所以其中必然有两个要存储在同一通道中。我们最终选择了孔隙率和次表面散射。</p><p id="bjs1j0_142">最后，将自发光存在 Alpha 通道中，允许纹理创作者更方便地将自发光与其余通道分离，然后将其并入反射纹理的 Alpha 通道，就像法线纹理中的高度图一样。</p></section></section><section class="chapter"><h2 id="n" data-toc="n">法线纹理 <code class="code" id="bjs1j0_150">_n</code></h2><p id="bjs1j0_146">法线纹理中不仅包含了法向量，还包含了环境光遮蔽和高度／置换图。法向量应被编码为 DirectX 格式（Y-），这通常被称为自上而下法线，表征为X轴／红色通道指向右，Y轴／绿色通道指向下。</p><section class="chapter"><h3 id="textureAO" data-toc="textureAO">材质环境光遮蔽（下称材质 AO）</h3><ul class="list _bullet" id="bjs1j0_151"><li class="list__item" id="bjs1j0_152"><p>AO 强度被存储于法线纹理的蓝色通道中。 </p><ul class="list _bullet" id="bjs1j0_154"><li class="list__item" id="bjs1j0_155"><p>法向量的第三分量 <code class="code" id="bjs1j0_156">.z</code> 可以使用 <code class="code" id="bjs1j0_157">sqrt(1.0 - dot(normal.xy, normal.xy))</code> 进行重建。</p></li></ul></li><li class="list__item" id="bjs1j0_153"><p>这个属性以线性存储；0 表示 100% 遮蔽，255 表示 0% 。</p></li></ul></section><section class="chapter"><h3 id="bjs1j0_148" data-toc="bjs1j0_148">高度图</h3><ul class="list _bullet" id="bjs1j0_158"><li class="list__item" id="bjs1j0_159"><p>被用于计算 POM 的高度图存储在法线纹理的 Alpha 通道中。值 0（在高度图中为纯黑色）表示方块的 25% 深度。 </p><ul class="list _bullet" id="bjs1j0_160"><li class="list__item" id="bjs1j0_161"><p>注意：高度图值为 0 会导致一些光影的 POM 出现问题，所以建议值至少为 1 。</p></li></ul></li></ul></section><section class="chapter"><h3 id="bjs1j0_149" data-toc="bjs1j0_149">布局原理</h3><p id="bjs1j0_162">AO 存储在蓝色通道中，因为法线纹理中每个像素的前三个分量表示长度为 1 的矢量。由于我们知道长度，我们只需要三个分量中的两个即可重建向量（感谢毕达哥拉斯）。这意味着三个通道中的一个可以用于其他用途，比如将 AO 存储在蓝色通道中。</p></section></section><section class="chapter"><h2 id="bjs1j0_16" data-toc="bjs1j0_16">版本历史</h2><section class="chapter"><h3 id="labpbr-v1-3" data-toc="labpbr-v1-3">LabPBR v1.3</h3><ul class="list _bullet" id="bjs1j0_167"><li class="list__item" id="bjs1j0_168"><p>F0 现在以线性存储。</p></li><li class="list__item" id="bjs1j0_169"><p>过去的线性 F0 通过取其平方根来存储，并通过平方来解码。</p></li></ul></section><section class="chapter"><h3 id="labpbr-v1-2" data-toc="labpbr-v1-2">LabPBR v1.2</h3><ul class="list _bullet" id="bjs1j0_170"><li class="list__item" id="bjs1j0_171"><p>更改了材质 AO 在法线纹理中的存储方法。</p></li><li class="list__item" id="bjs1j0_172"><p>过去的材质 AO 以下列方法编码： </p><ul class="list _bullet" id="bjs1j0_173"><li class="list__item" id="bjs1j0_174"><p>将法线调整到 [-1, 1] 并归一化。</p></li><li class="list__item" id="bjs1j0_175"><p>将值域为 [17, 255] ，以 <code class="code" id="bjs1j0_178">sqrt()</code> 存储的材质 AO 乘入。</p></li><li class="list__item" id="bjs1j0_176"><p>将法线调整回 [0, 1] 。</p></li><li class="list__item" id="bjs1j0_177"><p>在将法线贴图的范围调整到 [-1, 1] 后，AO 和法线按以下方式解码： </p><ul class="list _bullet" id="bjs1j0_179"><li class="list__item" id="bjs1j0_180"><p><code class="code" id="bjs1j0_182">法线 = normalize(法线纹理.rgb)</code></p></li><li class="list__item" id="bjs1j0_181"><p><code class="code" id="bjs1j0_183">ao = length(法线纹理.rgb)</code></p></li></ul></li></ul></li></ul></section><section class="chapter"><h3 id="labpbr-v1-1" data-toc="labpbr-v1-1">LabPBR v1.1</h3><ul class="list _bullet" id="bjs1j0_184"><li class="list__item" id="bjs1j0_185"><p>新增硬编码金属。</p></li><li class="list__item" id="bjs1j0_186"><p>重新安排了自发光、次表面散射和孔隙率，依照其重要性和用途分配精度。</p></li></ul></section><section class="chapter"><h3 id="labpbr-v1-0" data-toc="labpbr-v1-0">LabPBR v1.0</h3><ul class="list _bullet" id="bjs1j0_187"><li class="list__item" id="bjs1j0_188"><p>初次规范。</p></li></ul></section></section><div class="last-modified">Last modified: 23 August 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="developer.html" class="navigation-links__prev">创作者文档</a><a href="rationormals.html" class="navigation-links__next">比率法线及其转换</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>