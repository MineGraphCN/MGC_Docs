<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#FDB71B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-04-11T04:27:17.725528463"><title>光影配置文件 | MineGraph Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"fshpyf_9","level":0,"title":"环境设置","anchor":"#fshpyf_9"},{"id":"customTex","level":0,"title":"自定义纹理","anchor":"#customTex"},{"id":"fshpyf_86","level":1,"title":"纹理来源","anchor":"#fshpyf_86"},{"id":"fshpyf_87","level":1,"title":"特殊后缀","anchor":"#fshpyf_87"},{"id":"fshpyf_88","level":1,"title":"原始纹理（二进制数据转储）","anchor":"#fshpyf_88"},{"id":"fshpyf_89","level":1,"title":"噪声纹理","anchor":"#fshpyf_89"},{"id":"fshpyf_11","level":0,"title":"光影设置","anchor":"#fshpyf_11"},{"id":"fshpyf_12","level":0,"title":"自定义统一变量","anchor":"#fshpyf_12"},{"id":"fshpyf_183","level":1,"title":"常量","anchor":"#fshpyf_183"},{"id":"fshpyf_184","level":1,"title":"参数","anchor":"#fshpyf_184"},{"id":"fshpyf_204","level":2,"title":"浮点值","anchor":"#fshpyf_204"},{"id":"fshpyf_205","level":2,"title":"布尔值","anchor":"#fshpyf_205"},{"id":"fshpyf_185","level":1,"title":"运算符","anchor":"#fshpyf_185"},{"id":"fshpyf_186","level":1,"title":"函数","anchor":"#fshpyf_186"},{"id":"fshpyf_404","level":2,"title":"布尔函数","anchor":"#fshpyf_404"},{"id":"fshpyf_405","level":2,"title":"组合向量函数","anchor":"#fshpyf_405"},{"id":"fshpyf_187","level":1,"title":"示例","anchor":"#fshpyf_187"},{"id":"alpha","level":0,"title":"Alpha 测试","anchor":"#alpha"},{"id":"blend","level":0,"title":"混合","anchor":"#blend"},{"id":"fshpyf_15","level":0,"title":"延迟处理渲染缩放","anchor":"#fshpyf_15"},{"id":"fshpyf_16","level":0,"title":"翻转缓冲区","anchor":"#fshpyf_16"},{"id":"fshpyf_17","level":0,"title":"缓冲区尺寸","anchor":"#fshpyf_17"},{"id":"fshpyf_18","level":0,"title":"开关特定的程序","anchor":"#fshpyf_18"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="MGC_Docs/page_logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="光影配置文件 | MineGraph Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MineGraph Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://docs.minegraph.cn/md/a03-shaderprop.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="光影配置文件 | MineGraph Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://docs.minegraph.cn/md/a03-shaderprop.html#webpage",
    "url": "https://docs.minegraph.cn/md/a03-shaderprop.html",
    "name": "光影配置文件 | MineGraph Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://docs.minegraph.cn/md/#website",
    "url": "https://docs.minegraph.cn/md/",
    "name": "MineGraph Docs Help"
}</script><!-- End Schema.org --></head><body data-id="a03-shaderProp" data-main-title="光影配置文件" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="创作者文档///shaderTutorial.md|光影开发教程///附录"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MineGraph Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="a03-shaderProp" data-annotation-ids="wip" id="a03-shaderProp.md">光影配置文件</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;fshpyf_21\&quot;\u003e本文列举了 \u003ccode class\u003d\&quot;code\&quot; id\u003d\&quot;fshpyf_23\&quot;\u003eshaders.properties\u003c/code\u003e 中的所有可配置内容。\u003c/p\u003e&quot;,&quot;\u003cp id\u003d\&quot;fshpyf_22\&quot;\u003e对应的视频设置选项具有更高优先级，除非是 \u003ccode class\u003d\&quot;code\&quot; id\u003d\&quot;fshpyf_24\&quot;\u003e默认\u003c/code\u003e。\u003c/p\u003e&quot;]}"></div><aside class="prompt" data-type="note" data-title="" id="fshpyf_20"><p id="fshpyf_25">这篇文档翻译自 <a href="https://github.com/sp614x/optifine/blob/master/OptiFineDoc/doc/shaders.properties" id="fshpyf_26" data-external="true" rel="noopener noreferrer" target="_blank">GitHub OptiFineDoc/shaders.properties</a> ，请以原文为准！</p></aside><section class="chapter"><h2 id="fshpyf_9" data-toc="fshpyf_9">环境设置</h2><div class="code-block" data-lang="properties">
clouds=fast|fancy|off
</div><p id="fshpyf_28">流畅、高品质或禁用原版云。 <code class="code" id="fshpyf_60">细节</code> &gt; <code class="code" id="fshpyf_61">云</code> 具有更高的优先级。</p><div class="code-block" data-lang="properties">
oldHandLight=true|false
</div><p id="fshpyf_30">启用或禁用经典手持光源，可以让只辨别主手光源的光影在副手持光源时也能正常工作。默认为 <code class="code" id="fshpyf_62">true</code>， <code class="code" id="fshpyf_63">光影</code> &gt; <code class="code" id="fshpyf_64">经典手持光源</code> 具有更高的优先级。</p><div class="code-block" data-lang="properties">
dynamicHandLight=true|false
</div><p id="fshpyf_32">启用或禁用动态光源。默认为 <code class="code" id="fshpyf_65">true</code>， <code class="code" id="fshpyf_66">动态光源</code> 具有更高的优先级。</p><div class="code-block" data-lang="properties">
oldLighting=true|false
</div><p id="fshpyf_34">启用或禁用经典光效。默认为 <code class="code" id="fshpyf_67">true</code>， <code class="code" id="fshpyf_68">光影</code> &gt; <code class="code" id="fshpyf_69">经典光效</code> 具有更高的优先级。变更该设置会导致资源包重载。</p><div class="code-block" data-lang="properties">
shadowTerrain=true|false
shadowTranslucent=true|false
shadowEntities=true|false
shadowBlockEntities=true|false
</div><p id="fshpyf_36">启用或禁用阴影几何缓冲中的地形、半透明、实体、方块实体渲染。默认为 <code class="code" id="fshpyf_70">true</code>。</p><div class="code-block" data-lang="properties">
underwaterOverlay=true|false
</div><p id="fshpyf_38">启用或禁用处于水下时屏幕上的水纹理覆层。默认为 <code class="code" id="fshpyf_71">true</code>。</p><div class="code-block" data-lang="properties">
sun=true|false
moon=true|false
</div><p id="fshpyf_40">启用或禁用太阳、月亮。 <code class="code" id="fshpyf_72">细节</code> &gt; <code class="code" id="fshpyf_73">日月</code> 具有更高的优先级。</p><div class="code-block" data-lang="properties">
vignette=true|false
</div><p id="fshpyf_42">启用或禁用屏幕边缘暗角。 <code class="code" id="fshpyf_74">细节</code> &gt; <code class="code" id="fshpyf_75">晕影</code> 具有更高的优先级。</p><div class="code-block" data-lang="properties">
backFace.solid=true|false
backFace.cutout=true|false
backFace.cutoutMipped=true|false
backFace.translucent=true|false
</div><p id="fshpyf_44">启用或禁用固体、裁切、带 MipMap 的裁切、半透明几何的背面渲染，启用后朝向背离屏幕的表面也会被渲染。默认为 <code class="code" id="fshpyf_76">false</code>。</p><div class="code-block" data-lang="properties">
rain.depth=true|false
</div><p id="fshpyf_46">启用或禁用雨雪粒子写入深度。默认为 <code class="code" id="fshpyf_77">true</code>。</p><div class="code-block" data-lang="properties">
beacon.beam.depth=true|false
</div><p id="fshpyf_48">启用或禁用信标光柱写入深度。默认为 <code class="code" id="fshpyf_78">true</code>。</p><div class="code-block" data-lang="properties">
separateAo=true|false
</div><p id="fshpyf_50">启用或禁用分离原版环境光遮蔽，启用后将顶点环境光遮蔽写入顶点颜色的 Alpha 通道，只对固体地形生效。默认为 <code class="code" id="fshpyf_79">false</code>。</p><div class="code-block" data-lang="properties">
frustum.culling=true|false
</div><p id="fshpyf_52">启用或禁用视锥裁切，启用后不可见的几何体将被丢弃，用以提高性能。默认为 <code class="code" id="fshpyf_80">true</code>。</p><div class="code-block" data-lang="properties">
shadow.culling=true|false
</div><p id="fshpyf_54">启用或禁用阴影视锥裁切，启用后部分 OptiFine 版本裁切由玩家视锥体控制，会导致问题。默认为 <code class="code" id="fshpyf_81">true</code>。</p><div class="code-block" data-lang="properties">
particles.before.deferred=true|false
</div><p id="fshpyf_56">启用或禁用粒子提前渲染，启用后粒子将会在 deferred 程序之前（第一轮几何缓冲）处理。默认为 <code class="code" id="fshpyf_82">false</code>。</p><div class="code-block" data-lang="properties">
version.&lt;mc_ver&gt;=&lt;of_edition&gt;
</div><p id="fshpyf_58">光影最低要求的 OptiFine 版本。例如：</p><div class="code-block" data-lang="properties">
version.1.12.2=D1
version.1.10.2=F1
version.1.8=J1
</div></section><section class="chapter"><h2 id="customTex" data-toc="customTex">自定义纹理</h2><div class="code-block" data-lang="properties">
texture.&lt;stage&gt;.&lt;name&gt;=&lt;path&gt;
</div><p id="fshpyf_84">将自定义纹理绑定到对应着色器可用的纹理单元。</p><ul class="list _bullet" id="fshpyf_85"><li class="list__item" id="fshpyf_90"><p id="fshpyf_92"><code class="code" id="fshpyf_94">stage</code>：</p><ul class="list _bullet" id="fshpyf_93"><li class="list__item" id="fshpyf_95"><p id="fshpyf_98"><code class="code" id="fshpyf_99">gbuffers</code> ：几何缓冲和阴影几何缓冲程序</p></li><li class="list__item" id="fshpyf_96"><p id="fshpyf_100"><code class="code" id="fshpyf_101">deferred</code> ：第一轮几何缓冲后的延迟处理（Deferred）</p></li><li class="list__item" id="fshpyf_97"><p id="fshpyf_102"><code class="code" id="fshpyf_103">composite</code> ：第二轮几何缓冲后的延迟处理程序（Composite 和 Final）</p></li></ul></li><li class="list__item" id="fshpyf_91"><p id="fshpyf_104"><code class="code" id="fshpyf_105">Name</code> ：纹理单元名称，可用名称请参考 <a href="a04-textureandpx.html#texID" id="fshpyf_106" data-tooltip="">纹理单元 ID</a>。</p></li></ul><section class="chapter"><h3 id="fshpyf_86" data-toc="fshpyf_86">纹理来源</h3><dl id="fshpyf_107" data-style="title-top"><dt id="fshpyf_108" data-expandable="false">光影</dt><dd><p id="fshpyf_112">相对 <code class="code" id="fshpyf_114">shaders</code> 内的路径，例如：</p><div class="code-block" data-lang="properties">
texture.composite.colortex1=textures/noise.png
</div></dd><dt id="fshpyf_109" data-expandable="false">资源包</dt><dd><p id="fshpyf_116">以 <code class="code" id="fshpyf_118">minecraft:</code> 开头的路径，例如：</p><div class="code-block" data-lang="properties">
texture.composite.colortex2=minecraft:textures/font/ascii.png
</div></dd><dt id="fshpyf_110" data-expandable="false">变化纹理（光照贴图和纹理集）</dt><dd><div class="code-block" data-lang="properties">
texture.composite.colortex3=minecraft:dynamic/lightmap_1
texture.composite.colortex4=minecraft:textures/atlas/blocks.png
</div></dd></dl></section><section class="chapter"><h3 id="fshpyf_87" data-toc="fshpyf_87">特殊后缀</h3><p id="fshpyf_121">使用 <code class="code" id="fshpyf_122">_n</code> 和 <code class="code" id="fshpyf_123">_s</code> 后缀可以加载法线/高光纹理： <code class="code" id="fshpyf_124">minecraft:textures/atlas/blocks_n.png</code></p></section><section class="chapter"><h3 id="fshpyf_88" data-toc="fshpyf_88">原始纹理（二进制数据转储）</h3><div class="code-block" data-lang="properties">
texture.&lt;stage&gt;.&lt;name&gt;=&lt;path&gt; &lt;type&gt; &lt;internalFormat&gt; &lt;dimensions&gt; &lt;pixelFormat&gt; &lt;pixelType&gt;
</div><ul class="list _bullet" id="fshpyf_126"><li class="list__item" id="fshpyf_129"><p id="fshpyf_134"><code class="code" id="fshpyf_137">&lt;type&gt;</code> ：纹理类型，下列之一：</p><ul class="list _horizontal" id="fshpyf_135" data-columns="3"><li class="list__item" id="fshpyf_138"><p id="fshpyf_144"><code class="code" id="fshpyf_145">TEXTURE_1D</code></p></li><li class="list__item" id="fshpyf_139"><p id="fshpyf_146"><code class="code" id="fshpyf_147">TEXTURE_3D</code></p></li><li class="list__item" id="fshpyf_140"></li><li class="list__item" id="fshpyf_141"><p id="fshpyf_148"><code class="code" id="fshpyf_149">TEXTURE_2D</code></p></li><li class="list__item" id="fshpyf_142"><p id="fshpyf_150"><code class="code" id="fshpyf_151">TEXTURE_RECTANGLE</code></p></li><li class="list__item" id="fshpyf_143"></li></ul><p id="fshpyf_136"></p></li><li class="list__item" id="fshpyf_130"><p id="fshpyf_152"><code class="code" id="fshpyf_153">&lt;internalFormat&gt;</code> ：纹理格式，参考 <a href="a04-textureandpx.html#texFormat" id="fshpyf_154" data-tooltip="">纹理格式</a></p></li><li class="list__item" id="fshpyf_131"><p id="fshpyf_155"><code class="code" id="fshpyf_156">&lt;dimensions&gt;</code> ：每个维度的尺寸，设置数量取决于纹理类型</p></li><li class="list__item" id="fshpyf_132"><p id="fshpyf_157"><code class="code" id="fshpyf_158">&lt;pixelFormat&gt;</code> ：像素格式，参考 <a href="a04-textureandpx.html#pxFormat" id="fshpyf_159" data-tooltip="">像素格式</a></p></li><li class="list__item" id="fshpyf_133"><p id="fshpyf_160"><code class="code" id="fshpyf_161">&lt;pixelType&gt;</code> ：像素类型，参考 <a href="a04-textureandpx.html#pxType" id="fshpyf_162" data-tooltip="">像素类型</a></p></li></ul><div class="code-block" data-lang="properties">
texture.composite.gaux1=textures/lut_1d.dat TEXTURE_1D RGBA32F 256 RGBA FLOAT
texture.composite.gaux1.2=textures/lut_3d.dat TEXTURE_3D RGBA32F 64 64 64 RGBA FLOAT
</div><ul class="list _bullet" id="fshpyf_128"><li class="list__item" id="fshpyf_163"><p id="fshpyf_166">可以将多个纹理绑定到同一个纹理单元，然后在着色器中使用 <code class="code" id="fshpyf_167">sampler1d</code>、 <code class="code" id="fshpyf_168">sampler2d</code>、 <code class="code" id="fshpyf_169">sampler3d</code> 等不同的采样器格式进行区分。每个程序只能使用每个纹理单元的其中一种采样器类型。</p></li><li class="list__item" id="fshpyf_164"><p id="fshpyf_170">可以在 <code class="code" id="fshpyf_171">&lt;name&gt;</code> 后添加后缀 <code class="code" id="fshpyf_172">.0</code>~<code class="code" id="fshpyf_173">.9</code> 来避免重复定义的属性键。</p></li><li class="list__item" id="fshpyf_165"><p id="fshpyf_174">可以通过同名的 <code class="code" id="fshpyf_175">.mcmeta</code> 文件设置边缘环绕行为和过滤方式。</p></li></ul></section><section class="chapter"><h3 id="fshpyf_89" data-toc="fshpyf_89">噪声纹理</h3><div class="code-block" data-lang="properties">
texture.noise=&lt;path&gt;
</div><p id="fshpyf_177">专用于保存噪声的纹理单元（当然你硬要写入其他的纹理也没法拦着你）。</p></section></section><section class="chapter"><h2 id="fshpyf_11" data-toc="fshpyf_11">光影设置</h2><p id="fshpyf_178">见 <a href="https://optifine.readthedocs.io/shaders_dev/options.html?h=shader+option#options-screen" id="fshpyf_180" data-external="true" rel="noopener noreferrer" target="_blank">Options screen - OptiDocs</a> ，不久之后我们会编写相关内容。</p><div class="code-block" data-lang="properties">
sliders=&lt;设置列表&gt;
profile.NAME=&lt;设置列表&gt;
screen.columns=2
screen.NAME.columns=2
</div></section><section class="chapter"><h2 id="fshpyf_12" data-toc="fshpyf_12">自定义统一变量</h2><div class="code-block" data-lang="properties">
uniform.&lt;float|int|bool|vec2|vec3|vec4&gt;.&lt;name&gt;=&lt;表达式&gt;
variable.&lt;float|int|bool|vec2|vec3|vec4&gt;.&lt;name&gt;=&lt;表达式&gt;
</div><p id="fshpyf_182">利用常量、变量、运算符和函数来自定义传入着色器的变量和用于配置文件中计算的变量，自定义统一变量会随着程序变化而更新。</p><section class="chapter"><h3 id="fshpyf_183" data-toc="fshpyf_183">常量</h3><ul class="list _horizontal" id="fshpyf_188" data-columns="4"><li class="list__item" id="fshpyf_189"><p id="fshpyf_192"><code class="code" id="fshpyf_194">pi</code></p><ul class="list _bullet" id="fshpyf_193"><li class="list__item" id="fshpyf_195"><p id="fshpyf_196">3.1415926</p></li></ul></li><li class="list__item" id="fshpyf_190"><p id="fshpyf_197"><code class="code" id="fshpyf_198">true</code></p></li><li class="list__item" id="fshpyf_191"><p id="fshpyf_199"><code class="code" id="fshpyf_200">false</code></p></li></ul></section><section class="chapter"><h3 id="fshpyf_184" data-toc="fshpyf_184">参数</h3><p id="fshpyf_201">一些固定标量的统一变量（即不会随着程序变更而变更的标量）也可用于参数，例如 <code class="code" id="fshpyf_206">heldItemId</code>、 <code class="code" id="fshpyf_207">worldTime</code>、 <code class="code" id="fshpyf_208">moonPhase</code> 等。</p><ul class="list _bullet" id="fshpyf_202"><li class="list__item" id="fshpyf_209"><p id="fshpyf_212">向量对象可以使用 <code class="code" id="fshpyf_213">.x</code> <code class="code" id="fshpyf_214">.y</code> <code class="code" id="fshpyf_215">.z</code> 和 <code class="code" id="fshpyf_216">.w</code> 来提取分量，例如 <code class="code" id="fshpyf_217">sunPosition.y</code>；</p></li><li class="list__item" id="fshpyf_210"><p id="fshpyf_218">颜色对象可以使用 <code class="code" id="fshpyf_220">.r</code> <code class="code" id="fshpyf_221">.g</code> <code class="code" id="fshpyf_222">.b</code> 和 <code class="code" id="fshpyf_223">.a</code> 来提取分量，例如 <code class="code" id="fshpyf_224">skyColor.r</code>；</p><ul class="list _bullet" id="fshpyf_219"><li class="list__item" id="fshpyf_225"><p id="fshpyf_226">这两种分量提取操作和 GLSL 一样不做强制要求。</p></li></ul></li><li class="list__item" id="fshpyf_211"><p id="fshpyf_227">矩阵可以使用两个连续的行列索引来提取参数，例如 <code class="code" id="fshpyf_228">gbufferModelView.0.1</code>。</p></li></ul><aside class="prompt" data-type="note" data-title="" id="fshpyf_203"><p id="fshpyf_229">自定义统一变量在组合向量时要求使用严格的标量，例如：</p><div class="code-block" data-lang="properties">
uniform.vec2.pixelSize = vec2(1.0 / viewWidth, 1.0 / viewHeight)
</div><p id="fshpyf_231">而不可以使用标量和向量组合运算或使用向量和向量组合运算。</p></aside><section class="chapter"><h4 id="fshpyf_204" data-toc="fshpyf_204">浮点值</h4><ul class="list _bullet" id="fshpyf_232"><li class="list__item" id="fshpyf_234"><p id="fshpyf_239"><code class="code" id="fshpyf_240">biome</code> - 生物群系 ID</p></li><li class="list__item" id="fshpyf_235"><p id="fshpyf_241"><code class="code" id="fshpyf_244">biome_category</code> - 群系类型，0 ~ 16（从左至右，从上至下）</p><ul class="list _horizontal" id="fshpyf_242" data-columns="3"><li class="list__item" id="fshpyf_245"><p id="fshpyf_262"><code class="code" id="fshpyf_263">CAT_NONE</code></p></li><li class="list__item" id="fshpyf_246"><p id="fshpyf_264"><code class="code" id="fshpyf_265">CAT_TAIGA</code></p></li><li class="list__item" id="fshpyf_247"><p id="fshpyf_266"><code class="code" id="fshpyf_267">CAT_EXTREME_HILLS</code></p></li><li class="list__item" id="fshpyf_248"><p id="fshpyf_268"><code class="code" id="fshpyf_269">CAT_JUNGLE</code></p></li><li class="list__item" id="fshpyf_249"><p id="fshpyf_270"><code class="code" id="fshpyf_271">CAT_MESA</code></p></li><li class="list__item" id="fshpyf_250"><p id="fshpyf_272"><code class="code" id="fshpyf_273">CAT_PLAINS</code></p></li><li class="list__item" id="fshpyf_251"><p id="fshpyf_274"><code class="code" id="fshpyf_275">CAT_SAVANNA</code></p></li><li class="list__item" id="fshpyf_252"><p id="fshpyf_276"><code class="code" id="fshpyf_277">CAT_ICY</code></p></li><li class="list__item" id="fshpyf_253"><p id="fshpyf_278"><code class="code" id="fshpyf_279">CAT_THE_END</code></p></li><li class="list__item" id="fshpyf_254"><p id="fshpyf_280"><code class="code" id="fshpyf_281">CAT_BEACH</code></p></li><li class="list__item" id="fshpyf_255"><p id="fshpyf_282"><code class="code" id="fshpyf_283">CAT_FOREST</code></p></li><li class="list__item" id="fshpyf_256"><p id="fshpyf_284"><code class="code" id="fshpyf_285">CAT_OCEAN</code></p></li><li class="list__item" id="fshpyf_257"><p id="fshpyf_286"><code class="code" id="fshpyf_287">CAT_DESERT</code></p></li><li class="list__item" id="fshpyf_258"><p id="fshpyf_288"><code class="code" id="fshpyf_289">CAT_RIVER</code></p></li><li class="list__item" id="fshpyf_259"><p id="fshpyf_290"><code class="code" id="fshpyf_291">CAT_SWAMP</code></p></li><li class="list__item" id="fshpyf_260"><p id="fshpyf_292"><code class="code" id="fshpyf_293">CAT_MUSHROOM</code></p></li><li class="list__item" id="fshpyf_261"><p id="fshpyf_294"><code class="code" id="fshpyf_295">CAT_NETHER</code></p></li></ul><p id="fshpyf_243"></p></li><li class="list__item" id="fshpyf_236"><p id="fshpyf_296"><code class="code" id="fshpyf_299">biome_precipitation</code> - 降水类型，0 ~ 2（从左至右）</p><ul class="list _horizontal" id="fshpyf_297" data-columns="3"><li class="list__item" id="fshpyf_300"><p id="fshpyf_303"><code class="code" id="fshpyf_304">PPT_NONE</code></p></li><li class="list__item" id="fshpyf_301"><p id="fshpyf_305"><code class="code" id="fshpyf_306">PPT_RAIN</code></p></li><li class="list__item" id="fshpyf_302"><p id="fshpyf_307"><code class="code" id="fshpyf_308">PPT_SNOW</code></p></li></ul><p id="fshpyf_298"></p></li><li class="list__item" id="fshpyf_237"><p id="fshpyf_309"><code class="code" id="fshpyf_310">temperature</code> - 温度，0.0 ~ 1.0</p></li><li class="list__item" id="fshpyf_238"><p id="fshpyf_311"><code class="code" id="fshpyf_312">rainfall</code> - 湿度，0.0 ~ 1.0</p></li></ul><p id="fshpyf_233">雨雪渲染判定依赖于 <code class="code" id="fshpyf_313">biome_precipitation != PPT_NONE</code> ，如果 <code class="code" id="fshpyf_314">temperature &gt;= 0.15</code> 则渲染雨，否则渲染雪。</p></section><section class="chapter"><h4 id="fshpyf_205" data-toc="fshpyf_205">布尔值</h4><p id="fshpyf_315">摄像机所在实体的状态，例如玩家本身或旁观模式附身的实体。</p><ul class="list _horizontal" id="fshpyf_316" data-columns="3"><li class="list__item" id="fshpyf_317"><p id="fshpyf_331"><code class="code" id="fshpyf_332">is_alive</code></p></li><li class="list__item" id="fshpyf_318"><p id="fshpyf_333"><code class="code" id="fshpyf_334">is_burning</code></p></li><li class="list__item" id="fshpyf_319"><p id="fshpyf_335"><code class="code" id="fshpyf_336">is_child</code></p></li><li class="list__item" id="fshpyf_320"><p id="fshpyf_337"><code class="code" id="fshpyf_338">is_glowing</code></p></li><li class="list__item" id="fshpyf_321"><p id="fshpyf_339"><code class="code" id="fshpyf_340">is_hurt</code></p></li><li class="list__item" id="fshpyf_322"><p id="fshpyf_341"><code class="code" id="fshpyf_342">is_in_lava</code></p></li><li class="list__item" id="fshpyf_323"><p id="fshpyf_343"><code class="code" id="fshpyf_344">is_in_water</code></p></li><li class="list__item" id="fshpyf_324"><p id="fshpyf_345"><code class="code" id="fshpyf_346">is_invisible</code></p></li><li class="list__item" id="fshpyf_325"><p id="fshpyf_347"><code class="code" id="fshpyf_348">is_on_ground</code></p></li><li class="list__item" id="fshpyf_326"><p id="fshpyf_349"><code class="code" id="fshpyf_350">is_ridden</code></p></li><li class="list__item" id="fshpyf_327"><p id="fshpyf_351"><code class="code" id="fshpyf_352">is_riding</code></p></li><li class="list__item" id="fshpyf_328"><p id="fshpyf_353"><code class="code" id="fshpyf_354">is_sneaking</code></p></li><li class="list__item" id="fshpyf_329"><p id="fshpyf_355"><code class="code" id="fshpyf_356">is_sprinting</code></p></li><li class="list__item" id="fshpyf_330"><p id="fshpyf_357"><code class="code" id="fshpyf_358">is_wet</code></p></li></ul></section></section><section class="chapter"><h3 id="fshpyf_185" data-toc="fshpyf_185">运算符</h3><ul class="list _horizontal" id="fshpyf_359" data-columns="5"><li class="list__item" id="fshpyf_360"><p id="fshpyf_374"><code class="code" id="fshpyf_375">+</code></p></li><li class="list__item" id="fshpyf_361"><p id="fshpyf_376"><code class="code" id="fshpyf_377">-</code></p></li><li class="list__item" id="fshpyf_362"><p id="fshpyf_378"><code class="code" id="fshpyf_379">*</code></p></li><li class="list__item" id="fshpyf_363"><p id="fshpyf_380"><code class="code" id="fshpyf_381">/</code></p></li><li class="list__item" id="fshpyf_364"><p id="fshpyf_382"><code class="code" id="fshpyf_383">%</code></p></li><li class="list__item" id="fshpyf_365"><p id="fshpyf_384"><code class="code" id="fshpyf_385">!</code></p></li><li class="list__item" id="fshpyf_366"><p id="fshpyf_386"><code class="code" id="fshpyf_387">&amp;&amp;</code></p></li><li class="list__item" id="fshpyf_367"><p id="fshpyf_388"><code class="code" id="fshpyf_389">||</code></p></li><li class="list__item" id="fshpyf_368"><p id="fshpyf_390"><code class="code" id="fshpyf_391">&gt;</code></p></li><li class="list__item" id="fshpyf_369"><p id="fshpyf_392"><code class="code" id="fshpyf_393">&gt;=</code></p></li><li class="list__item" id="fshpyf_370"><p id="fshpyf_394"><code class="code" id="fshpyf_395">&lt;</code></p></li><li class="list__item" id="fshpyf_371"><p id="fshpyf_396"><code class="code" id="fshpyf_397">&lt;=</code></p></li><li class="list__item" id="fshpyf_372"><p id="fshpyf_398"><code class="code" id="fshpyf_399">==</code></p></li><li class="list__item" id="fshpyf_373"><p id="fshpyf_400"><code class="code" id="fshpyf_401">!=</code></p></li></ul></section><section class="chapter"><h3 id="fshpyf_186" data-toc="fshpyf_186">函数</h3><ul class="list _horizontal" id="fshpyf_402" data-columns="3"><li class="list__item" id="fshpyf_406"><p id="fshpyf_429"><code class="code" id="fshpyf_430">sin(x)</code></p></li><li class="list__item" id="fshpyf_407"><p id="fshpyf_431"><code class="code" id="fshpyf_432">cos(x)</code></p></li><li class="list__item" id="fshpyf_408"><p id="fshpyf_433"><code class="code" id="fshpyf_434">asin(x)</code></p></li><li class="list__item" id="fshpyf_409"><p id="fshpyf_435"><code class="code" id="fshpyf_436">acos(x)</code></p></li><li class="list__item" id="fshpyf_410"><p id="fshpyf_437"><code class="code" id="fshpyf_438">tan(x)</code></p></li><li class="list__item" id="fshpyf_411"><p id="fshpyf_439"><code class="code" id="fshpyf_440">atan(x)</code></p></li><li class="list__item" id="fshpyf_412"><p id="fshpyf_441"><code class="code" id="fshpyf_442">atan2(y, x)</code></p></li><li class="list__item" id="fshpyf_413"><p id="fshpyf_443"><code class="code" id="fshpyf_444">torad(deg)</code></p></li><li class="list__item" id="fshpyf_414"><p id="fshpyf_445"><code class="code" id="fshpyf_446">todeg(rad)</code></p></li><li class="list__item" id="fshpyf_415"><p id="fshpyf_447"><code class="code" id="fshpyf_448">min(x, y ,...)</code></p></li><li class="list__item" id="fshpyf_416"><p id="fshpyf_449"><code class="code" id="fshpyf_450">max(x, y, ...)</code></p></li><li class="list__item" id="fshpyf_417"><p id="fshpyf_451"><code class="code" id="fshpyf_452">abs(x)</code></p></li><li class="list__item" id="fshpyf_418"><p id="fshpyf_453"><code class="code" id="fshpyf_454">floor(x)</code></p></li><li class="list__item" id="fshpyf_419"><p id="fshpyf_455"><code class="code" id="fshpyf_456">ceil(x)</code></p></li><li class="list__item" id="fshpyf_420"><p id="fshpyf_457"><code class="code" id="fshpyf_458">exp(x)</code></p></li><li class="list__item" id="fshpyf_421"><p id="fshpyf_459"><code class="code" id="fshpyf_460">frac(x)</code></p></li><li class="list__item" id="fshpyf_422"><p id="fshpyf_461"><code class="code" id="fshpyf_462">log(x)</code></p></li><li class="list__item" id="fshpyf_423"><p id="fshpyf_463"><code class="code" id="fshpyf_464">pow(x, y)</code></p></li><li class="list__item" id="fshpyf_424"><p id="fshpyf_465"><code class="code" id="fshpyf_466">random()</code></p></li><li class="list__item" id="fshpyf_425"><p id="fshpyf_467"><code class="code" id="fshpyf_468">round(x)</code></p></li><li class="list__item" id="fshpyf_426"><p id="fshpyf_469"><code class="code" id="fshpyf_470">signum(x)</code></p></li><li class="list__item" id="fshpyf_427"><p id="fshpyf_471"><code class="code" id="fshpyf_472">sqrt(x)</code></p></li><li class="list__item" id="fshpyf_428"><p id="fshpyf_473"><code class="code" id="fshpyf_474">clamp(x, min, max)</code></p></li></ul><ul class="list _horizontal" id="fshpyf_403" data-columns="2"><li class="list__item" id="fshpyf_475"><p id="fshpyf_481"><code class="code" id="fshpyf_483">fmod(x, y)</code></p><ul class="list _bullet" id="fshpyf_482"><li class="list__item" id="fshpyf_484"><p id="fshpyf_485">类似 <code class="code" id="fshpyf_486">Math.floorMod()</code></p></li></ul></li><li class="list__item" id="fshpyf_476"><p id="fshpyf_487"><code class="code" id="fshpyf_489">if(cond, val, [cond2, val2, ...], val_else)</code></p><ul class="list _bullet" id="fshpyf_488"><li class="list__item" id="fshpyf_490"><p id="fshpyf_491">根据一个或多个条件取值</p></li></ul></li><li class="list__item" id="fshpyf_477"><p id="fshpyf_492"><code class="code" id="fshpyf_494">lerp(k, x, y)</code></p><ul class="list _bullet" id="fshpyf_493"><li class="list__item" id="fshpyf_495"><p id="fshpyf_496">在 <code class="code" id="fshpyf_497">x</code> 和 <code class="code" id="fshpyf_498">y</code> 之间线性插值</p></li></ul></li><li class="list__item" id="fshpyf_478"><p id="fshpyf_499"><code class="code" id="fshpyf_501">ifb(cond, val, [cond2, val2, ...], val_else)</code></p><ul class="list _bullet" id="fshpyf_500"><li class="list__item" id="fshpyf_502"><p id="fshpyf_503">根据一个或多个条件取布尔值</p></li></ul></li><li class="list__item" id="fshpyf_479"><p id="fshpyf_504"><code class="code" id="fshpyf_506">smooth([id], val, [fadeInTime, [fadeOutTime]])</code></p><ul class="list _bullet" id="fshpyf_505"><li class="list__item" id="fshpyf_507"><p id="fshpyf_510">根据自定义缓入缓出时间平滑一个变量在帧间值的变动。</p></li><li class="list__item" id="fshpyf_508"><p id="fshpyf_511"><code class="code" id="fshpyf_512">id</code> 必须是唯一的，如果不定义将会自动生成。</p></li><li class="list__item" id="fshpyf_509"><p id="fshpyf_513">默认过渡时间为 1 秒。</p></li></ul></li><li class="list__item" id="fshpyf_480"><p id="fshpyf_514"><code class="code" id="fshpyf_516">print(id, n, x)</code></p><ul class="list _bullet" id="fshpyf_515"><li class="list__item" id="fshpyf_517"><p id="fshpyf_518">每第 <code class="code" id="fshpyf_519">n</code> 帧在日志中输出 <code class="code" id="fshpyf_520">x</code> 的值。</p></li></ul></li></ul><section class="chapter"><h4 id="fshpyf_404" data-toc="fshpyf_404">布尔函数</h4><ul class="list _horizontal" id="fshpyf_521" data-columns="3"><li class="list__item" id="fshpyf_522"><p id="fshpyf_525"><code class="code" id="fshpyf_527">between(x, min, max)</code></p><ul class="list _bullet" id="fshpyf_526"><li class="list__item" id="fshpyf_528"><p id="fshpyf_529">检查值是否在最大值和最小值之间</p></li></ul></li><li class="list__item" id="fshpyf_523"><p id="fshpyf_530"><code class="code" id="fshpyf_532">equals(x, y, epsilon)</code></p><ul class="list _bullet" id="fshpyf_531"><li class="list__item" id="fshpyf_533"><p id="fshpyf_534">在误差范围内比较两个浮点值</p></li></ul></li><li class="list__item" id="fshpyf_524"><p id="fshpyf_535"><code class="code" id="fshpyf_537">in(x, val1, val2, ...)</code></p><ul class="list _bullet" id="fshpyf_536"><li class="list__item" id="fshpyf_538"><p id="fshpyf_539">检查值是否在取值列表中</p></li></ul></li></ul></section><section class="chapter"><h4 id="fshpyf_405" data-toc="fshpyf_405">组合向量函数</h4><ul class="list _horizontal" id="fshpyf_540" data-columns="3"><li class="list__item" id="fshpyf_541"><p id="fshpyf_544"><code class="code" id="fshpyf_545">vec2(x, y)</code></p></li><li class="list__item" id="fshpyf_542"><p id="fshpyf_546"><code class="code" id="fshpyf_547">vec3(x, y, z)</code></p></li><li class="list__item" id="fshpyf_543"><p id="fshpyf_548"><code class="code" id="fshpyf_549">vec4(x, y, z, w)</code></p></li></ul></section></section><section class="chapter"><h3 id="fshpyf_187" data-toc="fshpyf_187">示例</h3><div class="code-block" data-lang="properties">
variable.bool.isBiomeDark=in(biome, BIOME_RIVER, BIOME_FOREST)
variable.float.valBiomeDark=smooth(1, if(isBiomeDark, 1, 0), 5)
variable.float.valHurtDark=smooth(2, if(is_hurt, 1.3, 0), 0, 10)
variable.float.valSwordDark=smooth(3, if(heldItemId == 276, 1, 0), 0.5, 0.5)
uniform.float.screenDark=max(valBiomeDark, valHurtDark, valSwordDark)
uniform.vec3.screenDark3=vec3(screenDark, heldItemId, biome)
</div></section></section><section class="chapter"><h2 id="alpha" data-toc="alpha">Alpha 测试</h2><div class="code-block" data-lang="properties">
alphaTest.&lt;program&gt;=&lt;off|func ref&gt;
</div><aside class="prompt" data-type="tip" data-title="" id="fshpyf_552"><p id="fshpyf_553">虽然文档中写明可以指定每个程序的 Alpha 测试函数和参考值，但是实际上这行配置并没有作用。</p></aside></section><section class="chapter"><h2 id="blend" data-toc="blend">混合</h2><p id="fshpyf_554">见 <a href="2-1-solidgeometries.html#blend" id="fshpyf_556" data-tooltip="由于几何缓冲程序向缓冲区输出内容之后不会翻转缓冲区，OptiFine 中的一些几何缓冲默认启用了混合（Blending）。GL 可以通过混合方程（Blend Equation）让一些内容在输出时与缓冲区上已有内容进行色彩混合。">混合</a>。</p><div class="code-block" data-lang="properties">
blend.&lt;program&gt;=&lt;off|src dst srcA dstA&gt;
blend.&lt;program&gt;.&lt;buffer&gt;=&lt;off|src dst srcA dstA&gt;
</div></section><section class="chapter"><h2 id="fshpyf_15" data-toc="fshpyf_15">延迟处理渲染缩放</h2><div class="code-block" data-lang="properties">
scale.&lt;program&gt;=&lt;scale|scale offsetX offsetY&gt;
</div><p id="fshpyf_558">自定义延迟处理程序中铺屏四边形的视口尺寸。要求所有值都在 <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.526ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 2000.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path></g><g data-mml-node="mn" transform="translate(278,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path></g><g data-mml-node="mo" transform="translate(778,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mn" transform="translate(1222.7,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></g><g data-mml-node="mo" transform="translate(1722.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path></g></g></g></svg></mjx-container> 区间内。</p></section><section class="chapter"><h2 id="fshpyf_16" data-toc="fshpyf_16">翻转缓冲区</h2><div class="code-block" data-lang="properties">
flip.&lt;program&gt;.&lt;buffer&gt;=&lt;true|false&gt;
</div><p id="fshpyf_561">启用或禁用指定延迟处理程序的指定颜色附件的缓冲区翻转功能，即&ldquo;乒乓缓冲区&rdquo;（Ping-pong buffer）。禁用翻转后，下一个延迟处理程序将会共享输入和输出。最后一个完成写入的程序应当启用缓冲区翻转，以便之后的程序正确读取写入后的内容。</p><p id="fshpyf_562">这个功能可以用于多个程序读取和写入同一个缓冲区不同区域的内容。强制翻转缓冲区可以用于读取一个颜色附件的两个缓冲区上的不同内容（即使在程序中没有向缓冲区写入内容也强制翻转，以便在下一个程序中读取颜色附件上另一个缓冲区的内容）。</p><p id="fshpyf_563">当程序向缓冲区写入内容后，默认会翻转缓冲区，如果没有写入内容，则不会翻转缓冲区。</p></section><section class="chapter"><h2 id="fshpyf_17" data-toc="fshpyf_17">缓冲区尺寸</h2><div class="code-block" data-lang="properties">
size.buffer.&lt;buffer&gt;=width height
</div><p id="fshpyf_565">指定固定尺寸的缓冲区。只有 <code class="code" id="fshpyf_570">prepare</code>、 <code class="code" id="fshpyf_571">deferred</code> 和 <code class="code" id="fshpyf_572">composite</code> 程序可以向固定尺寸缓冲区写入。</p><p id="fshpyf_566">不可以同时向多个不同尺寸的缓冲区中写入，即一个程序中只能向同尺寸的多个缓冲区输出。</p><p id="fshpyf_567">当高宽尺寸为浮点值时，会作为相对窗口渲染的尺寸。如</p><div class="code-block" data-lang="properties">
size.buffer.colortex2=0.5 0.5
</div><p id="fshpyf_569">会创建一个高宽均为渲染分辨率一半的缓冲区。渲染分辨率由 <code class="code" id="fshpyf_573">光影</code> &gt; <code class="code" id="fshpyf_574">渲染精细度</code> 和游戏窗口分辨率共同控制。</p></section><section class="chapter"><h2 id="fshpyf_18" data-toc="fshpyf_18">开关特定的程序</h2><div class="code-block" data-lang="properties">
program.&lt;program&gt;.enabled=&lt;表达式&gt;
</div><p id="fshpyf_576">和光影设置联动，用以当关闭一些效果时禁用处理它们的程序或启用相关后备程序。程序名称可以包含维度，如：</p><div class="code-block" data-lang="properties">
program.world-1/composite2.enabled=BLOOM
</div><p id="fshpyf_578">表达式可以是多个定义组成的布尔运算，如：</p><div class="code-block" data-lang="properties">
program.composite.enabled=(BLOOM || SSAO) &amp;&amp; !GODRAYS
</div></section><div class="last-modified">11 April 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="a02-corebuiltinvars.html" class="navigation-links__prev">核心配置中可用的内建变量</a><a href="a04-textureandpx.html" class="navigation-links__next">纹理和像素</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>