<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#FDB71B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-11-11T12:44:59.732692091"><title>Java 版光影 发展和轶事 | MineGraph Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"u52ymr_8","level":0,"title":"开端之前","anchor":"#u52ymr_8"},{"id":"u52ymr_13","level":1,"title":"修补这个世界","anchor":"#u52ymr_13"},{"id":"u52ymr_14","level":1,"title":"快一点，再快一点","anchor":"#u52ymr_14"},{"id":"u52ymr_9","level":0,"title":"第一缕光","anchor":"#u52ymr_9"},{"id":"u52ymr_10","level":0,"title":"鱼和熊掌","anchor":"#u52ymr_10"},{"id":"u52ymr_11","level":0,"title":"漫漫征程","anchor":"#u52ymr_11"},{"id":"u52ymr_12","level":0,"title":"附录：光影加载器圣经","anchor":"#u52ymr_12"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="MGC_Docs/page_logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Java 版光影 发展和轶事 | MineGraph Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MineGraph Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://docs.minegraph.cn/md/shaderhistoryje.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Java 版光影 发展和轶事 | MineGraph Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://docs.minegraph.cn/md/shaderhistoryje.html#webpage",
    "url": "https://docs.minegraph.cn/md/shaderhistoryje.html",
    "name": "Java 版光影 发展和轶事 | MineGraph Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://docs.minegraph.cn/md/#website",
    "url": "https://docs.minegraph.cn/md/",
    "name": "MineGraph Docs Help"
}</script><!-- End Schema.org --></head><body data-id="shaderHistoryJE" data-main-title="Java 版光影 发展和轶事" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Library.md|知识库///PopOfScience.md|科普文档"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MineGraph Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="shaderHistoryJE" data-label-id="basic" data-annotation-ids="wip,jedoc,shaderdoc" id="shaderHistoryJE.md">Java 版光影 发展和轶事</h1><section class="chapter"><h2 id="u52ymr_8" data-toc="u52ymr_8">开端之前</h2><section class="chapter"><h3 id="u52ymr_13" data-toc="u52ymr_13">修补这个世界</h3><p id="u52ymr_15">在古早的 Minecraft 中（<span class="control" id="u52ymr_20">JE <span class="emphasis" id="u52ymr_22">Alpha</span> v1.2.2</span> 以前），替换纹理是一件很困难的事。那时候还没有游戏内资源包甚至纹理包的支持，如果玩家想要替换纹理，只能手动替换游戏的 <code class="code" id="u52ymr_21">.jar</code> 文件中的资源。</p><p id="u52ymr_16">然而当时的游戏只支持由基础分辨率为 16x 的单个方块拼接而成，总大小为 256x 的纹理集。如果强行将其替换为更高清的纹理集就会出现错误乃至直接崩溃。</p><figure id="u52ymr_17"><img alt="截止纹理包出现前最后一个版本（a1.2.1_01）的 terrain.png" src="MGC_Docs/a1.2.1_01_terrain.png" title="截止纹理包出现前最后一个版本（a1.2.1_01）的terrain.png" width="256" height="256"></figure><p id="u52ymr_18">出于人们<span id="u52ymr_23"><span class="text-line-through">在互联网早年间特有的浪漫主义而产生的</span></span>对高清纹理的追求 <span id="u52ymr_24"><span class="text-line-through">（其实不能加载高清纹理是个漏洞）</span></span>， <span class="emphasis" id="u52ymr_25">xau</span> 于 2010 年 10 月 1 日发布了 MCPatcher，它的主要目的就是修补对高清纹理的兼容性，后来还逐渐扩展了连接纹理等其他特性，直到 <span class="control" id="u52ymr_26">JE 1.8.8</span> 停更前由 <span class="emphasis" id="u52ymr_27">Kahr</span> 进行维护。</p><aside class="prompt" data-type="tip" data-title="" id="u52ymr_19"><p id="u52ymr_28">高清纹理导致的问题直到 <span class="control" id="u52ymr_29">JE <span class="emphasis" id="u52ymr_30">Beta</span> 1.8</span> 才被修复。</p></aside></section><section class="chapter"><h3 id="u52ymr_14" data-toc="u52ymr_14">快一点，再快一点</h3><p id="u52ymr_31">早期虽然游戏的内容较少，但硬件性能也普遍较弱。 <span class="emphasis" id="u52ymr_37">出于人们对性能亘古不变的追求</span> ，2011 年 1 月 11 日， <span class="emphasis" id="u52ymr_38">Scaevolus</span> 的 FPS Boost 模组横空出世，它还有一个现如今我们看起来既熟悉又陌生名字：Opti<span class="control" id="u52ymr_39">m</span>ine。</p><p id="u52ymr_32">就像它的名字一样，Optimine 的主要目标就是 <span class="emphasis" id="u52ymr_40"><span class="control" id="u52ymr_42">Opti</span>mise</span> (优化) <span class="emphasis" id="u52ymr_41"><span class="control" id="u52ymr_43">Mine</span>craft</span> ，提供了很多针对渲染管线的优化。</p><p id="u52ymr_33">Optimine 发布后不久，它被 <span class="emphasis" id="u52ymr_44">sp614x</span> 接手，开始着手添加更多优化功能并吸收 MCPatcher 的功能来获取更好的兼容性和性能，同时它的名字也变成了我们所熟知的 Opti<span class="control" id="u52ymr_45">F</span>ine。</p><p id="u52ymr_34">随着 OptiFine 的更新，自 <span class="control" id="u52ymr_46">JE 1.8</span> 起，它已经包含了 MCPatcher 的几乎所有功能，也标志着 MCPatcher 正式退出历史的舞台。</p><p id="u52ymr_35">如今 OptiFine 的文件通常是 <code class="code" id="u52ymr_47">&lt;preview_&gt;OptiFine_&lt;Minecraft版本&gt;_HD_U_&lt;OptiFine版本&gt;.jar</code> ，事实上在 OptiFine 刚刚发布时，除了 文件名中 <code class="code" id="u52ymr_48">U</code> 所代表的 <span class="control" id="u52ymr_49">Ultra</span> 以外，还有更多其他的版本。这是 <a href="https://www.minecraftforum.net/forums/mapping-and-modding-java-edition/minecraft-mods/1272953-optifine-hd-fps-boost-dynamic-lights-shaders-and" id="u52ymr_50" data-external="true" rel="noopener noreferrer">OptiFine 的 MinecraftForum 发布页</a> 上对以前存在的各个 OptiFine 版本所提供功能的列表：</p><div class="table-wrapper"><table class="wide" id="u52ymr_36"><thead><tr class="ijRowHead" id="u52ymr_51"><th id="u52ymr_62" width="120"><p>功能＼版本</p></th><th id="u52ymr_63" width="50"><p>轻量 (Light)</p></th><th id="u52ymr_64" width="50"><p>标准 (Standard)</p></th><th id="u52ymr_65" width="50"><p>平滑 (Smooth)</p></th><th id="u52ymr_66" width="50"><p>多核 (Multi-Core)</p></th><th id="u52ymr_67" width="50"><p>抗锯齿 (<span class="tooltip" id="u52ymr_69" title="Anti-Aliasing">AA</span>)</p></th><th id="u52ymr_68" width="50"><p>极致 (Ultra)</p></th></tr></thead><tbody><tr id="u52ymr_52"><td id="u52ymr_70"><p>性能优化</p></td><td id="u52ymr_71"><p>✓</p></td><td id="u52ymr_72"><p>✓</p></td><td id="u52ymr_73"><p>✓</p></td><td id="u52ymr_74"><p>✓</p></td><td id="u52ymr_75"><p>✓</p></td><td id="u52ymr_76"><p>✓</p></td></tr><tr id="u52ymr_53"><td id="u52ymr_77"><p>高清纹理</p></td><td id="u52ymr_78" rowspan="9"></td><td id="u52ymr_79"><p>✓</p></td><td id="u52ymr_80"><p>✓</p></td><td id="u52ymr_81"><p>✓</p></td><td id="u52ymr_82"><p>✓</p></td><td id="u52ymr_83"><p>✓</p></td></tr><tr id="u52ymr_54"><td id="u52ymr_84"><p>高清字体</p></td><td id="u52ymr_85"><p>✓</p></td><td id="u52ymr_86"><p>✓</p></td><td id="u52ymr_87"><p>✓</p></td><td id="u52ymr_88"><p>✓</p></td><td id="u52ymr_89"><p>✓</p></td></tr><tr id="u52ymr_55"><td id="u52ymr_90"><p>更好的草地和雪地</p></td><td id="u52ymr_91"><p>✓</p></td><td id="u52ymr_92"><p>✓</p></td><td id="u52ymr_93"><p>✓</p></td><td id="u52ymr_94"><p>✓</p></td><td id="u52ymr_95"><p>✓</p></td></tr><tr id="u52ymr_56"><td id="u52ymr_96"><p>连接纹理</p></td><td id="u52ymr_97"><p>✓</p></td><td id="u52ymr_98"><p>✓</p></td><td id="u52ymr_99"><p>✓</p></td><td id="u52ymr_100"><p>✓</p></td><td id="u52ymr_101"><p>✓</p></td></tr><tr id="u52ymr_57"><td id="u52ymr_102"><p>随机实体</p></td><td id="u52ymr_103"><p>✓</p></td><td id="u52ymr_104"><p>✓</p></td><td id="u52ymr_105"><p>✓</p></td><td id="u52ymr_106"><p>✓</p></td><td id="u52ymr_107"><p>✓</p></td></tr><tr id="u52ymr_58"><td id="u52ymr_108"><p>扩展选项</p></td><td id="u52ymr_109"><p>✓</p></td><td id="u52ymr_110"><p>✓</p></td><td id="u52ymr_111"><p>✓</p></td><td id="u52ymr_112"><p>✓</p></td><td id="u52ymr_113"><p>✓</p></td></tr><tr id="u52ymr_59"><td id="u52ymr_114"><p>消除顿卡</p></td><td id="u52ymr_115" rowspan="3"></td><td id="u52ymr_116"><p>✓</p></td><td id="u52ymr_117"><p>✓</p></td><td id="u52ymr_118" rowspan="2"></td><td id="u52ymr_119"><p>✓</p></td></tr><tr id="u52ymr_60"><td id="u52ymr_120"><p>多核 CPU 支持</p></td><td id="u52ymr_121" rowspan="2"></td><td id="u52ymr_122"><p>✓</p></td><td id="u52ymr_123"><p>✓</p></td></tr><tr id="u52ymr_61"><td id="u52ymr_124"><p><span class="tooltip" id="u52ymr_128" title="Anti-Aliasing">AA</span> 和 <span class="tooltip" id="u52ymr_129" title="Anisotropic Filtering">AF</span></p></td><td id="u52ymr_125"></td><td id="u52ymr_126"><p>✓</p></td><td id="u52ymr_127"><p>✓</p></td></tr></tbody></table></div></section></section><section class="chapter"><h2 id="u52ymr_9" data-toc="u52ymr_9">第一缕光</h2><p id="u52ymr_130">现代的原版 Minecraft 由于缺少光照层次，画面多少显得有些单调，而在早年间这种情况则更甚。由于那时游戏内容较少、场景单一、纹理和光照粗糙（平滑光照直到 2011 年 2 月 22 日的 <span class="control" id="u52ymr_136">JE <span class="emphasis" id="u52ymr_137">Beta</span> 1.3</span> 才加入），早期的 Minecraft 呈现出来一种很标准的梦核质感（甚至可以说在一定程度上催生了 Herobrine 的都市传说），玩家们也迫切地想要改变这一点。</p><p id="u52ymr_131">终于，在 2011 年 1 月 7 日， <span class="emphasis" id="u52ymr_138">daxnitro</span> 发布了 <span class="tooltip" id="u52ymr_139" title="GLSL Shader Core">GLSL 光影核心</span>模组，它重新编写了一套可自定义管线，并定义了沿用至今的由资源包提供的法线和高光纹理。</p><aside class="prompt" data-type="tip" data-title="" id="u52ymr_132"><p id="u52ymr_140">有些玩家可能会好奇，为什么这些模组都在 2011 年初扎堆出现。这是因为那时候 Minecraft 刚刚结束 Alpha 进入 Beta 阶段，正在经历第一个上升期，并在 2013 年中附近达到顶峰。</p></aside><p id="u52ymr_133">自 <span class="control" id="u52ymr_141">JE 1.8</span> 起，OptiFine 合并了光影核心的功能并继续开发，也首次推出了光影设置功能。由于其本身对原版进行了深度魔改，因而能提供很多相关变量，OptiFine 光影也由此开始快速发展。而光影核心则仍由 <span class="emphasis" id="u52ymr_142">karyonix</span> 针对基于其编写的老旧光影进行兼容性维护 <sup class="superscript" id="u52ymr_143"><b id="u52ymr_145">1</b></sup> ，直到 <span class="control" id="u52ymr_144">JE 1.12</span> 正式停更。</p><ul class="list _none" id="u52ymr_134"><li class="list__item" id="u52ymr_146"><p><span class="control" id="u52ymr_148">[1]</span> 事实上几乎所有光影都能无缝转换到 OptiFine 运行，但是基于 OptiFine 编写的光影则可能无法在光影核心上正常运行，兼容性维护只是让玩家和整合包作者在遇到 OptiFine 冲突时可以将光影核心作为备选方案。</p></li><li class="list__item" id="u52ymr_147"></li></ul><aside class="prompt" data-type="tip" data-title="" id="u52ymr_135"><p id="u52ymr_149">在这期间，OptiFine 还顺便合并了动态光源的功能，并将其与光影进行了兼容。</p></aside></section><section class="chapter"><h2 id="u52ymr_10" data-toc="u52ymr_10">鱼和熊掌</h2><p id="u52ymr_150">由于 OptiFine 对原版游戏程序的深度魔改和逆向工程，一定程度上导致了 OptiFine 无法开源，也就间接导致了其在 Forge 上就常和许多模组冲突。除了那些因为程序冲突而直接崩溃的，更多的模组是由于自身管线并不规范，导致 OptiFine 光影无法兼容（特别是又正好赶上 <span class="control" id="u52ymr_153">JE 1.6</span> 附近的第一次模组大爆发，OptiFine 和光影作者几乎不可能主动做逆向兼容）。</p><p id="u52ymr_151"><span class="control" id="u52ymr_154">JE 1.13</span> 扁平化之后，由于 OptiFine 与原版游戏的深度绑定，间接导致了其需要跟进重构，促使了在正式版发布后 OptiFine 前所未有的长达三个月的空窗期（从 <span class="control" id="u52ymr_155">JE 1.13</span> 开发版算起正好一年）。而 Forge 由于其屎山代码过于复杂，更是直接跳过了 <span class="control" id="u52ymr_156">JE 1.13</span> 和 <span class="control" id="u52ymr_157">1.13.1</span> ，直到 <span class="control" id="u52ymr_158">JE 1.13.2</span> 发布后四个月的 2019 年 2 月才姗姗来迟。</p><p id="u52ymr_152">忍受不了 Forge 这个屎山， <span class="emphasis" id="u52ymr_159">FabricMC</span> 团队于 <span class="control" id="u52ymr_160">JE 1.14</span> 推出了与其团队同名的模组加载器 <span class="control" id="u52ymr_161">Fabric</span> 。其将 API 和加载器独立，并且只提供最为基础的功能来达到快速更新和高性能的目的。而 OptiFine 从未主动兼容过 Fabric，玩家只能通过第三方模组 OptiFabric 作为桥梁将 OptiFine 在 Fabric 环境下加载，然而作为桥梁的 OptiFabric 兼容性更加灾难，导致 OptiFine 几乎和大半 Fabric 模组不兼容。</p></section><section class="chapter"><h2 id="u52ymr_11" data-toc="u52ymr_11">漫漫征程</h2><p id="u52ymr_162">在 <span class="control" id="u52ymr_166">JE 1.16</span> 发布后不久， <span class="emphasis" id="u52ymr_167">出于人们对性能亘古不变的追求</span>， <span class="emphasis" id="u52ymr_168">CaffeineMC</span> 团队开发的 Fabric 独占的优化模组 Sodium 横空出世。由于 <span class="control" id="u52ymr_169">JE 1.16</span> 发布的下界更新过于庞大，导致自 <span class="control" id="u52ymr_170">JE 1.13</span> 以来的性能债开始变得越来越不可忽视。Sodium 的目的很简单，那就是爆改原版渲染来提升性能，也由于其暴力的优化方式，通常需要安装 Indium 来保证兼容性（特别是修改了管线和添加了渲染特性的模组）。而迫切地想要在 Fabric 上提供模组兼容性良好、原生的光影支持，由 <span class="emphasis" id="u52ymr_171">coderbot</span> 发起， <span class="emphasis" id="u52ymr_172">IMS</span> 维护至今的 Iris 也几乎同时诞生。</p><p id="u52ymr_163">由于 OptiFine 闭源，Iris 决定通过兼容特定光影来进而逐步还原 OptiFine 的光影功能，最早一批兼容的光影几乎都集中在 <span class="tooltip" id="u52ymr_173" title="Sildur's Vibrant shaders">SVS</span> 和 BSL 及其魔改光影。早期的 Iris 在其内部捆绑特定版本的 Sodium 来保证性能。Iris 1.1.2 及之后的版本正式兼容并不再内置 Sodium，但是仍然需要后者才能运行。</p><p id="u52ymr_164">如今，Iris 已经将重心放在了开发独占特性上，但是其对 OptiFine 光影功能的还原并不尽如人意，当修改 Iris 代码使其独立运行时，它的性能表现也难以言喻。Iris 兼容性优先的策略也让其和 OptiFine 对待管线冲突的方法不尽相同，然而过于激进的兼容策略反而产生了某些渲染缺陷，比如植物魔法的魔力池中魔力的着色器会被直接跳过，导致无法正确渲染。更有一些长期占据 Issue 的问题也没能得到及时解决（几何缓冲混合方式下溢到延迟处理，以及最近才被解决的 <code class="code" id="u52ymr_174">block.properties</code> 中的宏直接被删除而不是解析并替换）。</p><p id="u52ymr_165">2022 年 7 月，Iris 的 Forge 非官方移植版 Oculus 在 Modrinth 上架，其目的与 Iris 一致，为 Forge 模组提供更好的光影兼容性。</p></section><section class="chapter"><h2 id="u52ymr_12" data-toc="u52ymr_12">附录：光影加载器圣经</h2><p id="u52ymr_175">关于光影加载器我有四不用。</p><p id="u52ymr_176">第一，不用 Oculus，因为它<span class="emphasis" id="u52ymr_180">善</span> 。别人都是要么给模组开发者史吃，要么给光影纹理开发者史吃，它干脆大发慈悲让所有人都雨露均沾。</p><p id="u52ymr_177">第二，不用 Iris，因为它<span class="emphasis" id="u52ymr_181">孝</span> 。从三年前号称作为 OptiFine 的高兼容性替代品在 Fabric 上接管所有光影，到现在这嫌代码侵权那嫌光影太旧，一边只管兼容模组不修 BUG，一边推出自己的独占接口吸引 OptiFine 光影的开发者过来，最后发现吔到了一大口史。</p><p id="u52ymr_178">第三，不用 Canvas，因为它<span class="emphasis" id="u52ymr_182">贞</span> 。Canvas 的初心是给模组提供渲染 API，在上面开发光影 = NTR，要被浸猪笼后烧死。</p><p id="u52ymr_179">第四，不用 OptiFine，因为它<span class="emphasis" id="u52ymr_183">忠</span> 。一直以来，高清修复对内都为光影纹理提供了一个稳定的开发环境，对外从来不在乎模组兼容性，对自己人不可谓不忠诚。</p></section><div class="last-modified">Last modified: 11 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="shaderhistorybe.html" class="navigation-links__prev">基岩版光影 发展和轶事</a><a href="shadertech.html" class="navigation-links__next">着色器 技术科普</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>