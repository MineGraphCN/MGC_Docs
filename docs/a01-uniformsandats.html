<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#FDB71B"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-07-11T12:20:50.39495817"><title>OptiFine 提供的数据 | MineGraph Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"uniforms","level":0,"title":"统一变量","anchor":"#uniforms"},{"id":"y2v0e9_16","level":1,"title":"纹理","anchor":"#y2v0e9_16"},{"id":"y2v0e9_17","level":2,"title":"通用","anchor":"#y2v0e9_17"},{"id":"y2v0e9_18","level":2,"title":"几何缓冲专用","anchor":"#y2v0e9_18"},{"id":"y2v0e9_19","level":2,"title":"延迟处理专用","anchor":"#y2v0e9_19"},{"id":"attributes","level":0,"title":"顶点属性","anchor":"#attributes"},{"id":"y2v0e9_9","level":0,"title":"标准宏","anchor":"#y2v0e9_9"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="frontend/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="MGC_Docs/page_logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="OptiFine 提供的数据 | MineGraph Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="MineGraph Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://docs.minegraph.cn/md/a01-uniformsandats.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="OptiFine 提供的数据 | MineGraph Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://docs.minegraph.cn/md/a01-uniformsandats.html#webpage",
    "url": "https://docs.minegraph.cn/md/a01-uniformsandats.html",
    "name": "OptiFine 提供的数据 | MineGraph Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://docs.minegraph.cn/md/#website",
    "url": "https://docs.minegraph.cn/md/",
    "name": "MineGraph Docs Help"
}</script><!-- End Schema.org --></head><body data-id="a01-uniformsAndAts" data-main-title="OptiFine 提供的数据" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="创作者文档///shaderTutorial.md|光影开发教程///附录"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MineGraph Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="a01-uniformsAndAts" data-annotation-ids="port" id="a01-uniformsAndAts.md">OptiFine 提供的数据</h1><div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;y2v0e9_10\&quot;\u003e本附录列出了所有 OptiFine 提供的统一变量和顶点属性，你可以直接复制并保存至一个文件以便今后直接 \u003ccode class\u003d\&quot;code\&quot; id\u003d\&quot;y2v0e9_12\&quot;\u003e#include\u003c/code\u003e。\u003c/p\u003e&quot;,&quot;\u003cp id\u003d\&quot;y2v0e9_11\&quot;\u003e此外，我们还列出了所有标准宏，它们在链接文件时自动包含在程序中，你可以直接在着色器中随意取用这些宏，并且不需要（也不能）手动定义。\u003c/p\u003e&quot;]}"></div><aside class="prompt" data-type="tip" data-title="" id="y2v0e9_6"><p id="y2v0e9_13">资料来源 <a href="https://github.com/sp614x/optifine/blob/master/OptiFineDoc/doc/shaders.txt" id="y2v0e9_14" data-external="true" rel="noopener noreferrer" target="_blank">GitHub - OptiFineDoc &quot;shaders.txt&quot;</a></p></aside><section class="chapter"><h2 id="uniforms" data-toc="uniforms">统一变量</h2><div class="code-block" data-lang="glsl">
uniform int heldItemId;                   // 手持物品ID (主手)，只用于在 item.properties 中有定义的方块
uniform int heldBlockLightValue;          // 手持物品光照值 (主手)
uniform int heldItemId2;                  // 手持物品ID (副手)，只用于在 item.properties 中有定义的方块
uniform int heldBlockLightValue2;         // 手持物品光照值 (副手)
uniform int fogMode;                      // GL_LINEAR，GL_EXP 或 GL_EXP2
uniform float fogStart;                   // 雾气渐入开始距离 (米)
uniform float fogEnd;                     // 雾气渐入结束距离 (米)
uniform int fogShape;                     // 0 = 球体, 1 = 圆柱体
uniform float fogDensity;                 // 0.0-1.0
uniform vec3 fogColor;                    // r, g, b
uniform vec3 skyColor;                    // r, g, b
uniform int worldTime;                    // &lt;ticks&gt; = worldTicks % 24000
uniform int worldDay;                     // &lt;days&gt; = worldTicks / 24000
uniform int moonPhase;                    // 0-7
uniform int frameCounter;                 // 帧索引 (0 到 720719, 然后重置为 0)
uniform float frameTime;                  // 上一帧用时，秒
uniform float frameTimeCounter;           // 运行时间，秒 (3600 秒后重置为 0)
uniform float sunAngle;                   // 0.0-1.0 ~ 0-23214 12785日-12786月 = .5
uniform float shadowAngle;                // 0.0-1.0 ~ 同步 sunAngle 的前半周期
uniform float rainStrength;               // 0.0-1.0
uniform float aspectRatio;                // viewWidth / viewHeight
uniform float viewWidth;                  // 窗口宽
uniform float viewHeight;                 // 窗口高
uniform float near;                       // 近平面距离
uniform float far;                        // 远平面距离
uniform vec3 sunPosition;                 // 视口空间的太阳位置
uniform vec3 moonPosition;                // 视口空间的月亮位置
uniform vec3 shadowLightPosition;         // 视口空间的投影光源 (日或月) 位置，需要启用阴影，否则固定为太阳
uniform vec3 upPosition;                  // 天顶方向
uniform vec3 cameraPosition;              // 世界空间的摄像机位置
uniform vec3 previousCameraPosition;      // 上一帧的摄像机位置
uniform mat4 gbufferModelView;            // 设置了摄像机变换（包括视角摇晃）的模型视口矩阵
uniform mat4 gbufferModelViewInverse;     // gbufferModelView 的逆
uniform mat4 gbufferPreviousModelView;    // 上一帧的 gbufferModelView
uniform mat4 gbufferProjection;           // 生成几何缓冲时的投影矩阵
uniform mat4 gbufferProjectionInverse;    // gbufferProjection 的逆
uniform mat4 gbufferPreviousProjection;   // 上一帧的 gbufferProjection
uniform mat4 shadowProjection;            // 生成阴影贴图时的投影矩阵
uniform mat4 shadowProjectionInverse;     // shadowProjection 的逆
uniform mat4 shadowModelView;             // 生成阴影贴图时的模型视口矩阵
uniform mat4 shadowModelViewInverse;      // shadowModelView 的逆
uniform float wetness;                    // 由 wetnessHalfLife 或 drynessHalfLife 平滑的 rainStrength
uniform float eyeAltitude;                // 观察实体的 Y 坐标
uniform ivec2 eyeBrightness;              // x = 方块亮度，y = 天空亮度，强度 0-15 = 亮度 0-240
uniform ivec2 eyeBrightnessSmooth;        // 由 eyeBrightnessHalflife 平滑的 eyeBrightness
uniform int isEyeInWater;                 // 1 = 摄像机在水中, 2 = 摄像机在熔岩中, 3 = 摄像机在细雪中
uniform float nightVision;                // 夜视 (0.0-1.0)
uniform float blindness;                  // 失明 (0.0-1.0)
uniform float screenBrightness;           // 原版亮度 (0.0-1.0)
uniform int hideGUI;                      // 已隐藏GUI
uniform float centerDepthSmooth;          // 由 centerDepthSmoothHalflife 平滑的 centerDepth
uniform ivec2 atlasSize;                  // 纹理拼贴尺寸 (只在拼贴纹理装在时设置)
uniform vec4 spriteBounds;                // 纹理拼贴上的精灵图边界 (u0, v0, u1, v1)，当 MC_ANISOTROPIC_FILTERING 启用时设置
uniform vec4 entityColor;                 // 实体颜色乘数 (实体受击、苦力怕爆炸时的闪烁)
uniform int entityId;                     // 实体 ID
uniform int blockEntityId;                // 方块实体 ID (用于瓦片实体的方块 ID，只用于在 block.properties 中有定义的方块)
uniform ivec4 blendFunc;                  // 混合函数 (源RGB, 目标RGB, 源Alpha, 目标Alpha)
uniform int instanceId;                   // 启用实例渲染时的实例 ID (countInstances &gt; 1), 0 = 源，1-N = 拷贝
uniform float playerMood;                 // 玩家氛围 (0.0-1.0)，当玩家长时间处于地下时增长
uniform int renderStage;                  // 渲染阶段, 见标准宏和渲染阶段
uniform int bossBattle;                   // 1 = 自定义, 2 = 末影龙, 3 = 凋灵, 4 = 劫掠
// 1.17+
uniform mat4 modelViewMatrix;             // 模型视口矩阵，替换 gl_ModelViewMatrix，下同
uniform mat4 modelViewMatrixInverse;      // 模型视口矩阵的逆
uniform mat4 projectionMatrix;            // 投影矩阵
uniform mat4 projectionMatrixInverse;     // 投影矩阵的逆
uniform mat4 textureMatrix;               // 纹理矩阵，默认是单位矩阵
uniform mat3 normalMatrix;                // 法线矩阵
uniform vec3 chunkOffset;                 // 地形（terrain）的区块起始位置，和属性 vaPosition 一起使用
uniform float alphaTestRef;               // alpha测试参考值, 使用 &quot;if (color.a &lt; alphaTestRef) discard;&quot; 进行检查
// 1.19+
uniform float darknessFactor;             // 黑暗效果强度 (0.0-1.0)
uniform float darknessLightFactor;
</div><section class="chapter"><h3 id="y2v0e9_16" data-toc="y2v0e9_16">纹理</h3><section class="chapter"><h4 id="y2v0e9_17" data-toc="y2v0e9_17">通用</h4><div class="code-block" data-lang="glsl">
uniform sampler2D shadowtex0;
uniform sampler2D shadowtex1;

uniform sampler2D depthtex0;
uniform sampler2D depthtex1;
uniform sampler2D depthtex2;

uniform sampler2D colortex4;
uniform sampler2D colortex5;
uniform sampler2D colortex6;
uniform sampler2D colortex7;
uniform sampler2D colortex8;
uniform sampler2D colortex9;
uniform sampler2D colortex10;
uniform sampler2D colortex11;
uniform sampler2D colortex12;
uniform sampler2D colortex13;
uniform sampler2D colortex14;
uniform sampler2D colortex15;

uniform sampler2D shadowcolor0;
uniform sampler2D shadowcolor1;

uniform sampler2D noisetex;
</div></section><section class="chapter"><h4 id="y2v0e9_18" data-toc="y2v0e9_18">几何缓冲专用</h4><div class="code-block" data-lang="glsl">
uniform sampler2D gtexture;
uniform sampler2D lightmap;
uniform sampler2D normals;
uniform sampler2D specular;
</div></section><section class="chapter"><h4 id="y2v0e9_19" data-toc="y2v0e9_19">延迟处理专用</h4><div class="code-block" data-lang="glsl">
uniform sampler2D colortex0;
uniform sampler2D colortex1;
uniform sampler2D colortex2;
uniform sampler2D colortex3;
</div><aside class="prompt" data-type="tip" data-title="" id="y2v0e9_23"><p id="y2v0e9_24">你可以利用 <code class="code" id="y2v0e9_25">#define</code> 来判断当前着色器程序，然后根据程序声明专用纹理。</p></aside></section></section></section><section class="chapter"><h2 id="attributes" data-toc="attributes">顶点属性</h2><div class="code-block" data-lang="glsl">
in vec3 vaPosition;       // position (x, y, z)          1.17+，对于地形（terrain）来说是区块起始位置，需要配合 chunkOffset 使用
in vec4 vaColor;          // color (r, g, b, a)          1.17+
in vec2 vaUV0;            // texture (u, v)              1.17+
// in ivec2 vaUV1;        // overlay (u, v)              1.17+，在原版中的作用被 entityColor 替代，若在 Iris 中声明此属性可能导致报错
in ivec2 vaUV2;           // lightmap (u, v)             1.17+
in vec3 vaNormal;         // normal (x, y, z)            1.17+
in vec3 mc_Entity;        // xy = 方块ID, 渲染器类型       方块 ID 只用于在 block.properties 中有定义的方块
in vec2 mc_midTexCoord;   // st = midTexU, midTexV       精灵图的纹理中央UV
in vec4 at_tangent;       // xyz = 切向量, w = 手系
in vec3 at_velocity;      // 上一帧的顶点偏移量             视口坐标，仅实体和方块实体
in vec3 at_midBlock;      // 向方块中心偏移1/64m           仅方块
</div></section><section class="chapter"><h2 id="y2v0e9_9" data-toc="y2v0e9_9">标准宏</h2><p id="y2v0e9_27">标准宏会在每个着色器文件的 <code class="code" id="y2v0e9_29">#version</code> 行后自动定义，可以在着色器程序中随时使用，无需进行手动定义。</p><dl id="y2v0e9_28" data-style="title-top"><dt id="y2v0e9_30" data-expandable="false">Minecraft 版本</dt><dd><div class="code-block" data-lang="glsl">
#define MC_VERSION &lt;value&gt;
</div><p id="y2v0e9_42">值为 122 格式（主 1, 次 2, 发布 2） 例如： <span class="control" id="y2v0e9_43">JE 1.9.4</span>-&gt; <code class="code" id="y2v0e9_44">10904</code>、 <span class="control" id="y2v0e9_45">JE 1.11.2</span>-&gt; <code class="code" id="y2v0e9_46">11102</code> 等。</p></dd><dt id="y2v0e9_31" data-expandable="false">最高支持的 GL 版本</dt><dd><div class="code-block" data-lang="glsl">
#define MC_GL_VERSION &lt;value&gt;
</div><p id="y2v0e9_49">整型值，例如： <code class="code" id="y2v0e9_50">210</code>、 <code class="code" id="y2v0e9_51">320</code>、 <code class="code" id="y2v0e9_52">450</code></p></dd><dt id="y2v0e9_32" data-expandable="false">最高支持的 GLSL 版本</dt><dd><div class="code-block" data-lang="glsl">
#define MC_GLSL_VERSION &lt;value&gt;
</div><p id="y2v0e9_55">整型值，例如： <code class="code" id="y2v0e9_56">120</code>、 <code class="code" id="y2v0e9_57">150</code>、 <code class="code" id="y2v0e9_58">450</code></p></dd><dt id="y2v0e9_33" data-expandable="false">操作系统</dt><dd><p id="y2v0e9_60">下列之一：</p><div class="code-block" data-lang="glsl">
#define MC_OS_WINDOWS
#define MC_OS_MAC
#define MC_OS_LINUX
#define MC_OS_OTHER
</div></dd><dt id="y2v0e9_34" data-expandable="false">驱动程序</dt><dd><p id="y2v0e9_63">下列之一：</p><div class="code-block" data-lang="glsl">
#define MC_GL_VENDOR_AMD
#define MC_GL_VENDOR_ATI
#define MC_GL_VENDOR_INTEL
#define MC_GL_VENDOR_MESA
#define MC_GL_VENDOR_NVIDIA
#define MC_GL_VENDOR_XORG
#define MC_GL_VENDOR_OTHER
</div></dd><dt id="y2v0e9_35" data-expandable="false">GPU</dt><dd><p id="y2v0e9_66">下列之一：</p><div class="code-block" data-lang="glsl">
#define MC_GL_RENDERER_RADEON 
#define MC_GL_RENDERER_GEFORCE
#define MC_GL_RENDERER_QUADRO
#define MC_GL_RENDERER_INTEL
#define MC_GL_RENDERER_GALLIUM
#define MC_GL_RENDERER_MESA
#define MC_GL_RENDERER_OTHER
</div></dd><dt id="y2v0e9_36" data-expandable="false">OpenGL 扩展</dt><dd><p id="y2v0e9_69">与受支持的 GL 扩展同名的前缀为 <code class="code" id="y2v0e9_71">MC_</code> 的宏。</p><ul class="list _bullet" id="y2v0e9_70"><li class="list__item" id="y2v0e9_72"><p id="y2v0e9_74">例如，当支持扩展 <code class="code" id="y2v0e9_75">GL_ARB_shader_texture_lod</code> 时，会定义宏 <code class="code" id="y2v0e9_76">MC_GL_ARB_shader_text_lod</code>。</p></li><li class="list__item" id="y2v0e9_73"><p id="y2v0e9_77">只有支持且引用了的扩展才会被添加到着色器中。</p></li></ul></dd><dt id="y2v0e9_37" data-expandable="false">设置</dt><dd><div class="code-block" data-lang="glsl">
#define MC_FXAA_LEVEL &lt;value&gt;             // 当 FXAA 启用时，值：2、4
#define MC_NORMAL_MAP                     // 当法线贴图启用时
#define MC_SPECULAR_MAP                   // 当高光贴图启用时
#define MC_RENDER_QUALITY &lt;value&gt;         // 值：0.5、0.70710677、1.0、1.4142135、2.0
#define MC_SHADOW_QUALITY &lt;value&gt;         // 值：0.5、0.70710677、1.0、1.4142135、2.0
#define MC_HAND_DEPTH &lt;value&gt;             // 值：0.0625、0.125、0.25
#define MC_OLD_HAND_LIGHT                 // 当经典手持光源启用时
#define MC_OLD_LIGHTING                   // 当经典光照启用时
#define MC_ANISOTROPIC_FILTERING &lt;value&gt;  // 当各向异性过滤启用时
</div></dd><dt id="y2v0e9_38" data-expandable="false">纹理</dt><dd><p id="y2v0e9_81">见 <a href="https://github.com/sp614x/optifine/blob/master/OptiFineDoc/doc/texture.properties" id="y2v0e9_84" data-external="true" rel="noopener noreferrer" target="_blank">OptiFineDoc &quot;texture.properties&quot;</a></p><div class="code-block" data-lang="glsl">
#define MC_TEXTURE_FORMAT_LAB_PBR       // LabPBR 纹理格式 ([[[Wiki|https://wiki.shaderlabs.org/wiki/LabPBR_Material_Standard]]])
#define MC_TEXTURE_FORMAT_LAB_PBR_1_3   // 版本 1.3
</div><p id="y2v0e9_83">你也可以在站内找到 <a href="labpbrmaterialstandard.html" id="y2v0e9_85" data-tooltip="">LabPBR 格式的翻译版本</a>。</p></dd><dt id="renderStage" data-expandable="false">渲染阶段</dt><dd><p id="y2v0e9_87"><code class="code" id="y2v0e9_89">&lt;const&gt;</code> 其值按执行顺序给出，用于统一变量 <code class="code" id="y2v0e9_90">renderStage</code> 。由于部分几何共用一个几何缓冲程序，因此可以使用形如 <code class="code" id="y2v0e9_91">if(renderStage == MC_RENDER_STAGE_XXX)</code> 进行当前渲染几何类型判断。</p><div class="code-block" data-lang="glsl">
#define MC_RENDER_STAGE_NONE &lt;const&gt;                    // 未定义
#define MC_RENDER_STAGE_SKY &lt;const&gt;                     // 天空
#define MC_RENDER_STAGE_SUNSET &lt;const&gt;                  // 日出和日落的天空覆盖
#define MC_RENDER_STAGE_CUSTOM_SKY &lt;const&gt;              // 自定义天空
#define MC_RENDER_STAGE_SUN &lt;const&gt;                     // 太阳
#define MC_RENDER_STAGE_MOON &lt;const&gt;                    // 月亮
#define MC_RENDER_STAGE_STARS &lt;const&gt;                   // 星星
#define MC_RENDER_STAGE_VOID &lt;const&gt;                    // 虚空
#define MC_RENDER_STAGE_TERRAIN_SOLID &lt;const&gt;           // 固体地形
#define MC_RENDER_STAGE_TERRAIN_CUTOUT_MIPPED &lt;const&gt;   // 带有 MipMap 的裁切地形
#define MC_RENDER_STAGE_TERRAIN_CUTOUT &lt;const&gt;          // 裁切地形
#define MC_RENDER_STAGE_ENTITIES &lt;const&gt;                // 实体
#define MC_RENDER_STAGE_BLOCK_ENTITIES &lt;const&gt;          // 方块实体
#define MC_RENDER_STAGE_DESTROY &lt;const&gt;                 // 挖掘裂纹覆盖
#define MC_RENDER_STAGE_OUTLINE &lt;const&gt;                 // 方块选择框
#define MC_RENDER_STAGE_DEBUG &lt;const&gt;                   // 调试渲染
#define MC_RENDER_STAGE_HAND_SOLID &lt;const&gt;              // 固体手持物品
#define MC_RENDER_STAGE_TERRAIN_TRANSLUCENT &lt;const&gt;     // 半透明地形
#define MC_RENDER_STAGE_TRIPWIRE &lt;const&gt;                // 绊线
#define MC_RENDER_STAGE_PARTICLES &lt;const&gt;               // 粒子
#define MC_RENDER_STAGE_CLOUDS &lt;const&gt;                  // 云
#define MC_RENDER_STAGE_RAIN_SNOW &lt;const&gt;               // 雨雪
#define MC_RENDER_STAGE_WORLD_BORDER &lt;const&gt;            // 世界边界
#define MC_RENDER_STAGE_HAND_TRANSLUCENT &lt;const&gt;        // 半透明手持物品
</div></dd></dl></section><div class="last-modified">11 July 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="2-3-1-advancedlighting.html" class="navigation-links__prev">进阶延迟处理：光照</a><a href="a02-corebuiltinvars.html" class="navigation-links__next">核心配置中可用的内建变量</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="frontend/app.js"></script></body></html>