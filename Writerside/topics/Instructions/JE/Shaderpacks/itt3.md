# iterationT 3.0.0 使用手册

<primary-label ref="manual"/>

<secondary-label ref="jedoc"/>
<secondary-label ref="shaderdoc"/>
<secondary-label ref="ofdoc"/>

## iterationT 的由来及版权信息 （必读）

- 在使用光影之前，我们需要先了解 iterationT 的由来。以下是关于它的起源：
![origin.png](origin.png)
由于 Cody 作者本人的协议限制，其他人在获得授权前，不允许公开发布魔改文件。国内的绝大部分 SEUS 魔改版本均不符合此要求。因此我们也希望大家**不要再把光影的文件或相关信息散布到国外社交平台上。**
 同时，我们也在逐步改进这个问题，下一代的 iterationT 4.0.0 与 iterationT RP 将会使用完全原创的代码，敬请期待。

## 使用须知（必读）

1. 本手册仅讲述与 iterationT 2.0.0 对比新增或修改的**部分明显功能**，完整内容需要先翻阅 [2.0.0 手册](itt2.md) 及塔纳斯的更新日志！

2. 启动标题可在光影设置右上角关闭

3. 兼容的 MC 与 optifine 版本：

    ```text
    游戏版本   OptiFine 版本
    1.16.5 ： HD_U_G7+
    1.17.1 ： HD_U_G9+
    1.18.1+ ： HD_U_H3+
    1.19+ ： HD_U_H8+
    ```

4. 光影选择界面右边栏需设置：

    ```text
    抗锯齿 ： 关闭
    阴影精细度 ： 1x
    经典光效 ： 默认
    ```

5. 不能保证模组的兼容性

6. 不兼容的设备：

    ```text
    MAC OS
    intel ARC系列显卡
    GTX600 或更早的nVIDIA Geforce显卡
    HD7000 或更早的AMD/ATI Radeon显卡
    2012 年以前发布的显卡
    ```

7. 反馈渠道：如有反馈问题，请填写该问卷：[腾讯问卷](https://wj.qq.com/s2/10615335/d757)

8. 已知问题：

已修复（在 3.1.0 封闭内测版中已修复的问题）：

- **1.16.5 OptiFine G8 版本以下不兼容**：因为使用了 OptiFine 新增的功能。目前（3.1.0）对 OptiFine 的兼容性已拓展至**与 2.0.1 相同**。
- **Iris Shader 无法加载光影**：在光影设置中关闭泛光可解决白屏问题。但内部版本实测出现了新问题（捡东西时闪屏），由于 Iris 自身原因，无法修复。
- **AMD Radeon GPU 加载异常**：为 AMD 新版显卡驱动导致的问题。现有版本（3.0.0）也可通过 `关闭地面大气散射` 和 `提高体积云采样/质量` 暂时解决偶发白屏错误和云的马赛克。

无法修复（在腾讯问卷里也有提到）：

- **实体半透明渲染错误**：例如史莱姆、闪电苦力怕，受制于光影架构。
- **半透明物体无法叠加渲染**：此问题受制于 OptiFine，无法修复。
- **少数情况下存在漏光**：尽力了，目前框架下难以完美解决。
- **光源方块周围异常变暗**：MC 自身的bug。

拒绝修复：

- **NVIDIA 516.40 版本的光影显示错误**：表现为屏幕有一道道横线，更新驱动即可解决。
- **未关闭各向异性过滤**：表现为天空撕裂，关闭游戏及显卡面板中的各向异性过滤即可解决。

下面正式开始讲解更新内容。

---

## 大气

**· 本篇内容会附带自定义讲解，喜欢DIY的小伙伴不要错过哦
· 带“⚙️”的句段为自定义讲解**

### 全新模型带来的全新的天空外观

![itt2-天空.png](itt2-天空.png)
iterationT 2.0.0 - 天空
![itt3-天空.png](itt3-天空.png)
iterationT 3.0.0 - 天空

### 基于物理模型的大气外天体渲染

![2022-08-06_18.50.43.png](2022-08-06_18.50.43.png)
iterationT 2.0.0 - 大气外天体渲染
![2022-08-06_18.50.33.png](2022-08-06_18.50.33.png)
iterationT 3.0.0 - 大气外天体渲染

ps：这也是文件体积增大的原因

- 新的大气散射 ，更柔和的体积云形态，可以飞上去的体积云，体验独特的天空之旅吧（此处在自定义开启了新增的天空地平线）

⚙️自定义位置：体积渲染 -> 杂项 -> 天空地平线

### 完整的行星大气模拟

### 调整体积云形态

![itt3-体积云.png](itt3-体积云.png)
iterationT 3.0.0 - 体积云

### 新增局部光照选项

- 使光照下的体积云更为合理

⚙️自定义位置：体积渲染 -> 体积云设置 -> 局部光照

### 新增适配大气模型的地面散射

---

## 体积雾

### 更加柔和的团雾形态

![itt3-团雾噪声.png](itt3-团雾噪声.png)
iteration 3.0.0 - 团雾

### 新增折射渲染选项

⚙️自定义位置：体积渲染 -> 折射后渲染

---

## 全局光照系统

### 新的RSM全局光照算法

![2022-08-06_19.18.24.png](2022-08-06_19.18.24.png)
iterationT 2.0.0 - RSM 全局光照
![2022-08-06_19.18.36.png](2022-08-06_19.18.36.png)
iterationT 3.0.0 - RSM 全局光照

- 重新改进的RSM全局光照，引入部分体素化成分，让世界更加鲜活，阴影拥有更多自然色彩（该效果非光追，仍会出现传统光栅光影中的漏光等现象，敬请期待RP版本的出世）

### 消除方块边缘的伪影

### 改善超出范围时的过渡效果

---

## 水下渲染

### 调整水雾、重写水下体积光

![itt2-水下体积光.png](itt2-水下体积光.png)
iterationT 2.0.0 - 水雾、水下体积光
![itt3-水下体积光.png](itt3-水下体积光.png)
iteration 3.0.0 - 水雾、水下体积光

- 全新的水下雾气渲染，加上完整的水下体积光，染色玻璃水下适应 ，给你最沉浸的水下体验

⚙️自定义位置：体积渲染 -> 杂项 -> 水雾

### 调整焦散形态

![2022-08-06_20.19.55.png](2022-08-06_20.19.55.png)
iterationT 2.0.0 - 水下焦散
![2022-08-06_20.19.47.png](2022-08-06_20.19.47.png)
iterationT 3.0.0 -水下焦散

---

## 末地

### 新天体：黑洞

![黑洞.png](黑洞.png)

### 新增星环投影，动态星空与引力透镜

- 提升视觉体验

### 调整曝光表现，优化阴影质量

- 明暗变化不再那么强烈

---

## 下界

### 增强泛光雾，减少抖动

![2022-08-06_19.58.46.png](2022-08-06_19.58.46.png)
iterationT 2.0.0 - 下界雾
![2022-08-06_19.58.57.png](2022-08-06_19.58.57.png)
iterationT 3.0.0 - 下界雾

- 优化了下界雾气渲染，同时加入模糊效果，为你的下界增添一抹神秘色彩

---

## 材质系统

### 添加资源包分辨率自动检测、提升视差效果

![2022-08-06_19.35.16.png](2022-08-06_19.35.16.png)
iterationT 2.0.0 - 视差
![2022-08-06_19.35.27.png](2022-08-06_19.35.27.png)
iterationT 3.0.0 - 视差

- 完全重写SEUS原有的视差体系，使得现在视差有了正常渲染，同时支持了自适应分辨率，不需要再手动调整

### 新增各向异性过滤

⚙️自定义位置：材质 -> 各向异性过滤

### 提供PBR自发光支持

### 优化潮湿效果

---

## 天气系统

### 新的雨滴渲染，新增雪花判断

### 适配新大气模型的雨天效果

---

## 后处理

### 重写泛光算法、调整曝光逻辑

- 提升视觉体验

### 新增镜头眩光

- 对着太阳就能看见

### 新增黑幕

- 电影级宽幕回来了

⚙️自定义位置：后处理 -> 杂项 ->黑幕宽高比

### 新增探窟模式

![2022-08-06_18.57.54.png](2022-08-06_18.57.54.png)
iterationT 2.0.0
![2022-08-06_18.58.12.png](2022-08-06_18.58.12.png)
iterationT 3.0.0 - 探窟模式

- 为生存而全新设计的探窟模式，启用后将大幅提高洞穴暗处可见度。洞穴完全照亮，同时自动屏蔽天空，免除低视距下的漏光烦恼

⚙️自定义位置：快捷选项 -> 探窟模式

---

## Tahnass 的日志原文

```text
一、主要更新内容

1、大气系统
    1）全新模型带来的全新的天空外观
    2）完整的行星大气模拟
    3）基于物理模型的大气外天体渲染
    4）调整体积云
    5）新增适配大气模型的地面散射

2、全局光照系统
    1）强化了全局光照的细节与颜色表现
    2）消除方块边缘的伪影
    3）改善超出范围时的过渡效果

3、水下渲染
    1）调整水雾
    2）重写水下体积光
    3）调整焦散形态

4、体积雾
    1）更加柔和的团雾形态
    2）优化光照权重
    3）新增折射中渲染的选项
    4）大幅减少噪声图案的可见性

5、末地维度
    1）新增天体——黑洞
    2）新增星环投影，动态星空与引力透镜
    3）调整曝光表现，优化阴影质量

6、下界维度
    1）增强泛光雾，减少抖动

7、材质系统
    1）新的视差算法
    2）新增各向异性过滤支持
    3）添加PBR自发光支持
    4）优化潮湿效果

8、天气系统
    1）新的雨滴渲染，新增雪花判断
    2）适配新大气模型的雨天效果

9、后处理
    1）新增镜头炫光
    2）重写泛光算法
    3）调整曝光逻辑

10、探窟模式
    1）启用后将大幅提高洞穴暗处可见度


二、次要更改内容
 版本兼容更新至1.19
  新增多项自定义光源调整
 调整天空光照等级曲线
 调整方块光照等级曲线
 微调各种光源的亮度
  新增下界环境光照与雾气设置
 调整阴影基础模糊量，并新增相关自定义选项
 提升半影质量，并新增半影相关自定义选项
 调整植物次表面散射效果
 新增自动材质包分辨率判断
 新增模组方块兼容选项
 微调水波形态，并新增相关自定义选项
 调整方块高光强度
 新增半透明方块后水雾渲染
 新增多项雨天自定义选项
 新增水下体积雾开关
 新增天空与反射天空盒的地平线开关
 优化金属的天空反射遮蔽过渡
 新增细雪雾、岩浆雾，，尽可能接近原版
 调整失明效果，尽可能接近原版
 更改多数雾效的距离计算方式
 调整夜视效果
 优化景深采样方式
 新增曝光亮度权重的自动权重模式
 调整各维度默认的自动曝光模式
 新增黑幕选项
 调整暗光褪色效果，并新增相关自定义选项
 新增启动标题
 新增末地传送门专有渲染效果

三、修复内容
 旗帜半透明效果丢失
 手持旗帜半透明效果丢失
 雪花未渲染
 闪电未渲染
 附魔光效渲染错误
 半透明方块丢失
 ctm的overlay功能导致错误的半透明渲染
 高光材质对雨滴产生干扰
 高草丛的晃动缺失
 关闭“高光贴图”时渲染错误
 关闭“法线贴图”时渲染错误
 法线存在微小偏移误差
 法线朝向正上方时出现渲染错误
 区块边界渲染错误
 碰撞箱未渲染
 鱼竿的鱼线未渲染
 红石线发光效果未渲染
 烈焰人材质过亮
 完全光滑表面的反射中存在黑带
 半透明方块水雾层级异常
 日月光照更替时间错误
```
