# iterationT 3.2.0 使用手册

## iterationT 的版权信息 （必读）

- 由于 Cody 作者本人的协议限制，其他人在获得授权前，不允许公开发布魔改文件。国内的绝大部分 SEUS 魔改版本均不符合此要求。因此我们也希望大家**不要再把光影的文件或相关信息散布到国外社交平台上。**
 同时，我们也在逐步改进这个问题，在 iterationT 3.2.0 版本中已经重构了大部分侵权代码，下一代的 iterationT 4.0.0 将会使用完全原创的代码，敬请期待。

## 使用须知（必读）

1. 本手册仅讲述与 iterationT 3.0.0 对比新增或修改的**部分明显功能**，完整内容需要先翻阅 [2.0.0 手册](itt2.md)、[3.0.0 手册](itt3.md) 及塔纳斯的更新日志！

2. 启动标题可在光影设置右上角关闭

3. 兼容的 MC 与 光影加载器 版本：

    ```text
    光影加载器   游戏最低版本   光影加载器最低版本
    Optifine    1.8.9         M5
    Iris        1.18.2        1.6.10 *
    Oculus      1.20.1        1.6.13 *
    * 1.5.0 版本即可进行截图工作，但不可用于实际游戏，且可能存在未知错误
    ```

    ```text
    热门版本快捷对照表
    游戏版本   兼容的光影加载器   不兼容的光影加载器   特殊说明
    1.7.10    无                全部
    1.8.9     全部              无
    1.12.2    全部              无
    1.16.5    Optifine          Iris、Oculus
    1.18.2    Optifine、Iris    Oculus              Forge 下仅限 Optifine
    1.20.1    全部              无
    1.21 +    全部              无                  不保证 Iris 的未来更新兼容性
    ```

4. 光影选择界面右边栏需设置：

    ```text
    抗锯齿 ： 关闭
    阴影精细度 ： 1x
    经典光效 ： 默认
    ```

5. 不能保证模组的兼容性

6. 不兼容的设备：

    ```text
    MAC OS
    GTX600 或更早的nVIDIA Geforce显卡
    HD7000 或更早的AMD/ATI Radeon显卡
    2012 年以前发布的显卡
    * 兼容 Intel Arc 系列显卡，但不能发挥正常性能 *
    ```


7. 已知问题：

无法修复：

- **实体半透明渲染错误**：例如史莱姆、闪电苦力怕，受制于光影架构。
- **半透明物体无法叠加渲染**：此问题受制于 OptiFine，无法修复。
- **少数情况下存在漏光**：尽力了，目前框架下难以完美解决。
- **光源方块周围异常变暗**：MC 自身的bug。

拒绝修复：

- **NVIDIA 516.40 版本的光影显示错误**：表现为屏幕有一道道横线，更新驱动即可解决。
- **未关闭各向异性过滤**：表现为天空撕裂，关闭游戏及显卡面板中的各向异性过滤即可解决。

下面为本次重要更新内容。

---

**· 本篇内容会附带自定义讲解，喜欢DIY的小伙伴不要错过哦
· 带“⚙️”的句段为自定义**

## 性能表现

![itt32-Performance.webp](itt32-Performance.webp)
左：iterationT 3.0.0 及 108 FPS
右：iterationT 3.2.0 及 125 FPS

- 3.2.0 相比 3.0.0 ，在效果显著提升的同时，有着约 10% 或更多的性能提升。在启用视差材质时，提升幅度可达约 30% * 。因此也还请各位电脑配置已经达到主流的玩家们不用担心自己的配置。
    - *视差材质下的性能增长幅度受一些因素牵制，详情见材质部分的视差

---

## 大气

### 全新的云层效果

![itt3-Cloud.webp](itt3-Cloud.webp)
iterationT 3.0.0 - 云层
![itt32-Cloud.webp](itt32-Cloud.webp)
iterationT 3.2.0 - 云层

- 平面云和体积云全新升级。平面云现在可受光照影响，更加层次分明；体积云则完全重写、自主化，更加真实、柔和、自然。

ps：这也是文件体积又增大了的原因

### 云影回归

![itt32-CloudShadow.webp](itt32-CloudShadow.webp)

- 3.0.0 中消失的云影回归，现在此效果默认开启，可渲染 128 个区块范围内的云影。有需要的小伙伴可以在设置中关闭或进一步增加渲染距离（会导致精度下降）

⚙️快捷开关：快捷选项 -> 云影
⚙️自定义位置：体积渲染 -> 体积云设置 -> 云影设置

### 体积雾效果改进

---

## 光照

### 再次升级 RSM 全局光照

![itt3-RSM.webp](itt3-RSM.webp)
iterationT 3.0.0 - RSM 全局光照
![itt32-RSM.webp](itt32-RSM.webp)
iterationT 3.2.0 - RSM 全局光照

- RSM 全局光照再次改进，效果再度提升，让阳光下的世界充满活力色彩，~~仿佛一个小光追~~（该效果非光追，仍会出现传统光栅光影中的漏光等现象，敬请期待RP版本的出世）

### SSAO 升级为 GTAO

![itt3-AO.webp](itt3-AO.webp)
iterationT 3.0.0 - SSAO
![itt32-AO.webp](itt32-AO.webp)
iterationT 3.2.0 - GTAO

- 本次更新的环境光遮蔽系统升级为了更精细化的 GTAO (地面实情环境光遮蔽)，光照面不再出现不应有的细微阴影细节，而阴影中则有了应有的细微阴影细节。
    - 对比图细节参考提示：房屋的棱角处、旗帜后方
    - 此组图同时含有 RSM 全局光照的效果展示

### GTAO 半径参考对象

![itt32-AO1.webp](itt32-AO1.webp)
以地形距离为参考
![itt32-AO2.webp](itt32-AO2.webp)
以屏幕占比为参考

- 这是 GTAO 中的一个自定义选项，根据观察视角不同，可提供不同的质感表现。在俯视（如图）时可采用`屏幕占比`来增强整体画面质感，在地面时则应该采用`地形距离`让近处的 AO 表现更好，建议以个人喜好为准。

⚙️自定义位置：光照 -> 环境光遮蔽设置 -> 半径参考对象

### 手持光源环境交互

![itt32-Light.webp](itt32-Light.webp)
图片中为手电筒模式

- 3.2.0 中手持光源系统全面升级，手持光源时会根据左右手产生不同的光源位置效果，并且可以照射出方块阴影（采用屏幕空间阴影，并不完全准确），以及在 PBR 材质和水面上产生反光效果。
    - 以上效果在常规手持光源和手电筒模式均生效，手电筒模式能带来更明显的效果
    - 需要注意的是，现在左右手双持光源会造成性能下降

⚙️自定义位置：光照 -> 手持光源设置
⚙️手电筒模式：光照 -> 手持光源设置 -> 手持光源模式：手电筒

### 指向性方块光照

![itt32-Normal.webp](itt32-Normal.webp)

- 使光源在法线贴图上产生方向光照效果，但此效果会产生一些明显的光照问题，因此默认关闭。

⚙️启用方式：光照 -> 光照设置 -> 指向性方块光照：开
⚙️可调整下方的`指向性权重`来减小或提升光照效果，减小后问题的明显程度也会更低

### 屏幕空间阴影效果改进

---

## 水面

### 水面反射改进

![itt3-Water.webp](itt3-Water.webp)
iterationT 3.0.0 - 水面反射
![itt32-Water.webp](itt32-Water.webp)
iteration 3.2.0 - 水面反射

- 在 3.2.0 中水面反射结合多方改进，得到了质的提升。现在水面默认会反射体积雾，借由 TAA 改进减少了大部分噪点，并且改进了反光，让太阳反射在水面上不再是一群零碎的光点形态。

---

## 材质

### 再次提升视差效果

![itt32-Parallax.webp](itt32-Parallax.webp)
左：iterationT 3.0.0 及 97 FPS
右：iterationT 3.2.0 及 133 FPS

- 视差系统经过再次重写，显著提升了视差效果与性能，同时加入了各向异性过滤，使得远处视差不再模糊。在启用视差材质的情况下，光影帧数相比 3.0.0 可平均提升 30% 。
    - 注：材质分辨率过高（如 1024x）会导致性能被各向异性过滤反噬，实际测得会比 3.0.0 更低
    - 现在的视差分为`锐利`与`平滑`模式，建议低分辨率或像素材质启用`锐利`模式，高分辨率或写实材质启用`平滑`模式

⚙️自定义位置：材质 -> 视差设置 -> 视差模式

### 视差淡出

- 由于加入了各向异性过滤使得远处的视差不再模糊，可能导致过远处的视差表现不自然，产生严重闪烁。因此加入了视差淡出功能，可以让远处的视差渐隐，此选项默认开启。
    - 如果开启后远景仍然严重闪烁，请尝试调整视差深度和质量；若材质本身远景表现良好，可尝试关闭此选项。

⚙️自定义位置：材质 -> 视差设置 -> 视差淡出

### 实体视差
- 3.2.0 全新支持了实体（生物）视差材质，不过需要在设置中手动正确设置分辨率才可正确生效。

⚙️自定义位置：材质 -> 视差设置 -> 实体视差 / 实体纹理分辨率

### 完整的 LabPBR 特性支持

![itt32-PBR.webp](itt32-PBR.webp)
次表面散射

- 现已支持 LabPBR 的完整特性，包含新的`次表面散射（SSS）`和`孔隙率`支持，并且再一次改进了 PBR 反射的效果。现在 PBR 的默认类型已经变更为了 LabPBR 。
    - 由于支持`孔隙率`的材质包极少，所以默认关闭。

⚙️自定义位置：材质 -> PBR贴图设置
⚙️切换 OldPBR（SEUS PBR）：材质 -> PBR贴图设置 -> PBR标准类型：PTGI
⚙️孔隙率开启：材质 -> PBR贴图设置 -> 孔隙率设置 -> labPBR孔隙率：开

### 自定义天空盒支持

![itt32-Skybox.webp](itt32-Skybox.webp)
材质：Dramatic Skys，关闭光影云层

- 默认关闭支持，需手动开启；可以关闭光影本身的平面云和体积云来给天空盒效果让道。

⚙️启用方式：材质 -> 天空材质 -> 天空盒纹理：开

### 选择框效果修复

- 可以通过禁用选择框深度写入，来让方块选择框不会产生阴影。此修复默认关闭，不兼容 1.18 以下的游戏版本，且可能不符合所有人的喜好，会让选择框失去立体感（尽管这是一个错误）。

⚙️启用方式：材质 -> 杂项 -> 禁用选择框深度写入：开

### 硬编码物体的次表面散射效果改进

---

## 后处理

### 全新的景深效果

![itt32-Dof.webp](itt32-Dof.webp)

- 景深效果经过重新设计，其质量完全可以说是相机摄影爱好者的利器，除此之外还加入了口径蚀等专业效果供爱好者使用。景深及相关效果默认关闭。

⚙️自定义位置：后处理 -> 景深

### 潜行暗角

- 潜行时在屏幕上下加入额外暗角。与`手电筒模式`、`暗光褪色`合用，并降低亮度等选项，更有韵味哦

![itt32-Dark.webp](itt32-Dark.webp)
让你的游戏化身潜行 / 恐怖游戏 ~

⚙️启用方法：后处理 -> 暗角 -> 启用潜行暗角：开

### TAA改进、锐化改进、FSR 1.0

- 得益于这些改进，3.2.0 的画面将会比 3.0.0 版本更加清晰。此版本中还加入了 FSR 1.0 升采样，可以在手动调整到低渲染精度下的时候，额外提升清晰度。
    - FSR 1.0 效果不兼容 1.18 以下游戏版本及 Iris、Oculus ，且效果一般，仅建议实在需要帧数的情况下使用
    - 若要让 FSR 1.0 效果生效，请参考光影设置中的提示，否则可能不会正确生效
    - 调整渲染精细度请在进入地图前调节，否则加载非常缓慢

### AgX 滤镜

![itt32-ACES.webp](itt32-ACES.webp)
ACES Tonemap
![itt32-AgX.webp](itt32-AgX.webp)
AgX Tonemap

- 3.2.0 中，默认滤镜从 ACES 替换为了 AgX 。其拥有更高的动态范围表现，让画面更加富有深度。

⚙️自定义位置：后处理 -> 色彩调整

---

## 末地星系

### 可动天体

- 现在末地的土星变为了环绕末地岛运动，并且拥有实时光照变化，在盖住黑洞的时候还会遮蔽末地岛上的光照。
    - 黑洞的吸积盘在此版本中变得更为柔滑了，若要回归 3.0.0 中的尘埃状，请调整自定义
    - 土星默认环绕末地岛运动，可以前往自定义调速或固定其位置

⚙️自定义位置：材质 -> 末地天空

## 重要模组适配

### Iris 及 Oculus

![itt32-Loader.webp](itt32-Loader.webp)
左：Optifine 及 130 FPS
右：Iris 及 125 FPS
使用1.21.1版本、双方的默认参数（12 区块）和光影的默认参数，基于 2K 分辨率下使用 RTX 4070 测试

- 本次更新支持了 Iris 及 Oculus ，具体的支持版本请见文档开头的使用须知。
    - 需要说明的是，iterationT 是中高负载光影，所以在 Iris 上并不能获得显著的性能优势，甚至会比 Optifine 略低。并且由于 iterationT 仍不被国外认可，且 Iris 时常大动干戈的更新，不能保证未来一定能持续兼容 Iris ，更有可能在某次 Iris 更新中导致兼容性直接失效。因此建议没有某些强制需求的玩家们使用 Optifine 来运行 iterationT 3.2.0。

### Distant Horizons [DH]

![itt32-DH.webp](itt32-DH.webp)

```text
Distant Horizons 做了什么？
简单来说，它在Minecraft默认视距之外添加了简化的地形，以提高性能并允许更长的绘制距离。
现在你终于可以尽情欣赏你在山顶上建造的瞭望塔了！
```

- iterationT 现已全面支持超有名的 Minecraft 超级视距模组 -- Distant Horizons ！你或许在其他 Minecraft 社媒内容中见过它和其他光影联手带来的以前无法想象的壮丽风景，现在你终于可以搭配 iterationT 来欣赏这美妙的风景，实现你的截图梦想了！iterationT 作为对 DH 特效支持最全的一批光影之一，绝对不会让你失望。
    - 仅适配 Iris 与 DH 组合，具体模组要求请参阅 Iris 或 DH 官方信息
    - 此模组可前往 Curseforge 或 Modrinth 搜索获取
    - 你可以在自定义中启用`阴影贴图中渲染`让 DH 区块正确渲染阴影，否则只会存在屏幕空间阴影。但要注意，需同步调整`阴影贴图分辨率`和`阴影渲染距离`，调整`阴影渲染距离`过高而不提高`阴影贴图分辨率`会导致阴影质量严重下降。此举会导致帧数严重下降
    - 同时你还可以解限`体积雾渲染距离`和提高`云影渲染范围`让远景特效不会缺失，但同样是质量和帧数的权衡

⚙️自定义位置：兼容模组选项 -> Distant Horizons 设置

### Physics Mod [物理模组]

![itt32-Physics-Ocean.webp](itt32-Physics-Ocean.webp)
![itt32-Physics-Snow.webp](itt32-Physics-Snow.webp)

```text
物理模组
一种全新的沉浸式体验
像从未见过的那样潜入一个新世界。崩塌的洞穴、互动的布娃娃物理、物品物理等更多内容等待着你！
```

- iterationT 现已支持物理模组 Pro 的全部内容，特效也一样绝不妥协。无论是全新的水体 -- 汹涌澎湃的大波浪海洋；还是融入最新次表面散射技术，带有卓越质感的雪地。全部以 iterationT 原汁原味的质感呈现！
    - 完整特效体验需要物理模组 Pro 版本，免费但需自行架梯获取：[Patreon](https://www.patreon.com/Haubna)
    - 具体模组要求请参阅物理模组官方信息

---